/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise, SuppressedError, Symbol, Iterator */


function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

// アプリのデフォルト設定
const DEFAULT_SETTINGS = {
    bookTemplatePath: '',
    bookOutputFolder: '',
    blogTemplatePath: '',
    blogOutputFolder: '',
    anthropicApiKey: '',
    llmModel: 'claude-3-haiku-20240307'
};
// URLパターンの正規表現
const URL_PATTERN = /(https?:\/\/[^\s()<>]+(?:\([\w\d]+\)|([^!\s()<>.,;:'"[\]{}]|\/)))/g;
class BookCardCreator extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log('Loading Book Card Creator plugin v1.3.1');
            yield this.loadSettings();
            // スタイルシートを読み込む
            this.loadStyles();
            // コマンドパレットにコマンドを追加
            this.addCommand({
                id: 'create-book-card',
                name: 'Create Book Card from Amazon URL',
                callback: () => {
                    new BookUrlModal(this.app, this).open();
                }
            });
            // 技術ブログからカードを作成するコマンドを追加
            this.addCommand({
                id: 'create-tech-blog-card',
                name: 'Create Tech Blog Card from URL',
                callback: () => {
                    new TechBlogUrlModal(this.app, this).open();
                }
            });
            // カーソル下のURLからカードを作成するコマンドを追加
            this.addCommand({
                id: 'create-card-from-cursor',
                name: 'Create Card from URL under cursor',
                editorCallback: (editor, view) => __awaiter(this, void 0, void 0, function* () {
                    try {
                        // カーソル位置のURLを取得
                        const url = this.getUrlUnderCursor(editor);
                        if (!url) {
                            new obsidian.Notice('No URL found under cursor');
                            return;
                        }
                        console.log(`Found URL under cursor: ${url}`);
                        // URLの種類に基づいて適切なモーダルを開く
                        this.openModalForUrl(url);
                    }
                    catch (error) {
                        console.error('Error processing URL under cursor:', error);
                        new obsidian.Notice(`Error processing URL: ${error instanceof Error ? error.message : String(error)}`);
                    }
                })
            });
            // 設定タブを追加
            this.addSettingTab(new BookCardCreatorSettingTab(this.app, this));
            console.log('Book Card Creator plugin loaded successfully');
        });
    }
    /**
     * URLの種類を検出する
     * @param url 検査対象のURL
     * @returns URLの種類 ('amazon' または 'blog')
     */
    detectUrlType(url) {
        // URLのバリデーション
        if (!url.startsWith('http://') && !url.startsWith('https://')) {
            // 完全なURLでない場合はブログとして扱う
            return 'blog';
        }
        // Amazonの複数のドメインパターンに対応
        const amazonDomains = [
            'amazon.com',
            'amazon.co.jp',
            'amazon.co.uk',
            'amazon.de',
            'amazon.fr',
            'amazon.it',
            'amazon.es',
            'amazon.ca',
            'amazon.in',
            'amazon.com.au',
            'amazon.com.br',
            'amazon.nl',
            'amazon.com.mx',
            'amzn.to', // 短縮URL
            'a.co' // 短縮URL
        ];
        try {
            // URLオブジェクトを作成してドメインを取得
            const urlObj = new URL(url);
            const domain = urlObj.hostname;
            // Amazonドメインかどうかをチェック
            for (const amazonDomain of amazonDomains) {
                if (domain.includes(amazonDomain)) {
                    return 'amazon';
                }
            }
        }
        catch (error) {
            // URLの解析に失敗した場合はログに記録
            console.error('Error parsing URL:', error);
        }
        // デフォルトはブログとして扱う
        return 'blog';
    }
    // URLに基づいて適切なモーダルを開き、自動処理を開始
    openModalForUrl(url) {
        let modal;
        // URLの種類を検出
        const urlType = this.detectUrlType(url);
        // 適切なモーダルを選択
        if (urlType === 'amazon') {
            // Amazonの場合は書籍用モーダル
            modal = new BookUrlModal(this.app, this);
        }
        else {
            // それ以外はブログ用モーダル
            modal = new TechBlogUrlModal(this.app, this);
        }
        // URLを設定してモーダルを表示
        modal.url = url;
        modal.open();
        // URLが入力済みなので自動的に処理を開始（少し遅延させる）
        setTimeout(() => {
            modal.startProcessing();
        }, 100);
    }
    // プラグインのスタイルシートを読み込む
    loadStyles() {
        // Obsidianのプラグインでスタイルシートを読み込む正しい方法
        // プラグインのマニフェストで指定されたstyles.cssが自動的に読み込まれる
        // このメソッドは将来の拡張のために残しておく
    }
    onunload() {
        console.log('Unloading Book Card Creator plugin');
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
    /**
     * ファイルパスからTFileオブジェクトを取得（存在確認）
     * @param filePath ファイルパス
     * @returns TFileオブジェクトまたはnull
     */
    getTemplateFile(filePath) {
        const file = this.app.vault.getAbstractFileByPath(filePath);
        return file instanceof obsidian.TFile ? file : null;
    }
    /**
     * フォルダパスからTFolderオブジェクトを取得（存在確認）
     * @param folderPath フォルダパス
     * @returns TFolderオブジェクトまたはnull
     */
    getOutputFolder(folderPath) {
        const folder = this.app.vault.getAbstractFileByPath(folderPath);
        return folder instanceof obsidian.TFolder ? folder : null;
    }
    /**
     * ファイル名に使用できない文字を除去
     * @param title ファイル名に使いたいタイトル
     * @returns 安全なファイル名
     */
    sanitizeFilename(title) {
        return title.replace(/[\\/:*?"<>|]/g, '');
    }
    /**
     * カード情報からテンプレートを使用してノートを作成
     * @param cardInfo BookInfoかBlogInfoオブジェクト
     */
    createNoteFromTemplate(cardInfo) {
        return __awaiter(this, void 0, void 0, function* () {
            let templatePath = '';
            let outputFolderPath = '';
            // BookInfoかBlogInfoかを判定してテンプレートと出力フォルダを選択
            if (this.isBookInfo(cardInfo)) {
                templatePath = this.settings.bookTemplatePath;
                outputFolderPath = this.settings.bookOutputFolder;
            }
            else if (this.isBlogInfo(cardInfo)) {
                templatePath = this.settings.blogTemplatePath;
                outputFolderPath = this.settings.blogOutputFolder;
            }
            // テンプレートファイルが存在するか確認
            const templateFile = this.getTemplateFile(templatePath);
            if (!templateFile) {
                new obsidian.Notice('Template file not found. Please check your settings.');
                return;
            }
            // 出力フォルダが存在するか確認
            const outputFolder = this.getOutputFolder(outputFolderPath);
            if (!outputFolder) {
                new obsidian.Notice('Output folder not found. Please check your settings.');
                return;
            }
            // テンプレートの内容を取得
            const templateContent = yield this.app.vault.read(templateFile);
            // テンプレートの内容を置換
            let newContent = templateContent;
            // BookInfoかBlogInfoかを判定して適切な置換を行う
            if (this.isBookInfo(cardInfo)) {
                newContent = this.applyBookTemplate(newContent, cardInfo);
            }
            else if (this.isBlogInfo(cardInfo)) {
                newContent = this.applyBlogTemplate(newContent, cardInfo);
            }
            // ファイル名（タイトルから不正な文字を除去）
            const fileName = `${this.sanitizeFilename(cardInfo.title)}.md`;
            const filePath = `${outputFolderPath}/${fileName}`;
            // 新しいノートを作成
            try {
                yield this.app.vault.create(filePath, newContent);
                new obsidian.Notice(`Card created: ${fileName}`);
                // 作成したノートを開く
                const newFile = this.app.vault.getAbstractFileByPath(filePath);
                if (newFile instanceof obsidian.TFile) {
                    this.app.workspace.getLeaf().openFile(newFile);
                }
            }
            catch (error) {
                new obsidian.Notice(`Error creating note: ${error instanceof Error ? error.message : String(error)}`);
            }
        });
    }
    /**
     * 書籍情報をテンプレートに適用
     */
    applyBookTemplate(template, book) {
        let result = template;
        // 基本情報を置換
        result = result.replace(/{{book-creator:title}}/g, book.title);
        result = result.replace(/{{book-creator:author}}/g, this.createMarkdownLink(book.author, `${book.author}`));
        result = result.replace(/{{book-creator:genre}}/g, book.genre);
        result = result.replace(/{{book-creator:summary}}/g, book.summary);
        // Amazon URLをMarkdownリンクとして挿入
        result = result.replace(/{{book-creator:amazon-link}}/g, this.createMarkdownLink(book.title, book.amazonUrl));
        // ジャンルURLのリンクも挿入（ジャンルURLがある場合のみ）
        if (book.genreUrl) {
            result = result.replace(/{{book-creator:genre-link}}/g, this.createMarkdownLink(book.genre, book.genreUrl));
        }
        else {
            result = result.replace(/{{book-creator:genre-link}}/g, book.genre);
        }
        return result;
    }
    /**
     * ブログ情報をテンプレートに適用
     */
    applyBlogTemplate(template, blog) {
        let result = template;
        // 基本情報を置換
        result = result.replace(/{{blog-creator:title}}/g, blog.title);
        result = result.replace(/{{blog-creator:summary}}/g, blog.summary);
        // Blog URLをMarkdownリンクとして挿入
        result = result.replace(/{{blog-creator:blog-link}}/g, this.createMarkdownLink(blog.title, blog.blogUrl));
        return result;
    }
    /**
     * 型ガード: 与えられたオブジェクトがBookInfo型かどうかを判定
     */
    isBookInfo(info) {
        return 'amazonUrl' in info;
    }
    /**
     * 型ガード: 与えられたオブジェクトがBlogInfo型かどうかを判定
     */
    isBlogInfo(info) {
        return 'blogUrl' in info;
    }
    /**
     * ブログURLから情報を取得
     */
    fetchBlogInfo(blogUrl) {
        return __awaiter(this, void 0, void 0, function* () {
            // URLのバリデーション
            if (!blogUrl.includes('http')) {
                throw new Error('Invalid Blog URL');
            }
            try {
                // HTMLコンテンツを取得
                const htmlContent = yield this.fetchHtmlContent(blogUrl);
                // HTMLからメタデータを抽出
                const titleMatch = htmlContent.match(/<title[^>]*>([^<]+)<\/title>/) ||
                    htmlContent.match(/<h1[^>]*>([^<]+)<\/h1>/);
                // ページコンテンツを取得
                const bodyContent = this.extractMainContent(htmlContent);
                const cleanedContent = this.cleanHtml(bodyContent);
                // Anthropic APIで要約を生成
                let summary = 'No summary available.';
                if (cleanedContent && this.settings.anthropicApiKey) {
                    try {
                        summary = yield this.generateSummaryWithAnthropic(cleanedContent);
                    }
                    catch (error) {
                        console.error('Error generating summary:', error);
                        summary = 'Failed to generate summary: ' + (error instanceof Error ? error.message : String(error));
                    }
                }
                // データを整形して返す
                return {
                    title: titleMatch ? titleMatch[1].trim() : 'Unknown Title',
                    summary: summary,
                    blogUrl: blogUrl
                };
            }
            catch (error) {
                console.error('Error fetching blog information:', error);
                throw new Error('Failed to fetch blog information. Please check the URL and try again.');
            }
        });
    }
    /**
     * Amazonの本のURLから情報を取得
     */
    fetchBookInfo(amazonUrl) {
        return __awaiter(this, void 0, void 0, function* () {
            // URLのバリデーション
            if (!amazonUrl.includes('amazon')) {
                throw new Error('Invalid Amazon URL');
            }
            try {
                // HTMLコンテンツを取得
                const htmlContent = yield this.fetchHtmlContent(amazonUrl);
                // HTMLからメタデータを抽出
                const titleMatch = htmlContent.match(/<span id="productTitle"[^>]*>([^<]+)<\/span>/);
                const authorMatch = htmlContent.match(/<a class="[^"]*" href="[^"]*\/e\/[^"]*">([^<]+)<\/a>/) ||
                    htmlContent.match(/id="bylineInfo"[^>]*>[\s\S]*?<span[^>]*>([^<]+)<\/span>/);
                // 商品説明を取得 (複数のパターンに対応、より詳細なコンテンツを取得)
                const summaryMatch = htmlContent.match(/<div id="bookDescription_feature_div"[^>]*>([\s\S]*?)<\/div>/) ||
                    htmlContent.match(/<div id="productDescription"[^>]*>([\s\S]*?)<\/div>/) ||
                    htmlContent.match(/<div class="a-expander-content[^"]*" id="[^"]*Description[^"]*"[^>]*>([\s\S]*?)<\/div>/) ||
                    htmlContent.match(/<noscript><div>([\s\S]*?)<\/div><\/noscript>/);
                // ジャンル情報とリンクを取得
                const { genre, genreUrl } = this.extractGenreInfo(htmlContent, amazonUrl);
                // データを整形して返す
                return {
                    title: titleMatch ? titleMatch[1].trim() : 'Unknown Title',
                    author: authorMatch ? authorMatch[1].trim() : 'Unknown Author',
                    genre: genre,
                    genreUrl: genreUrl,
                    summary: summaryMatch ? this.cleanHtml(summaryMatch[1]).trim() : 'No summary available.',
                    amazonUrl: amazonUrl
                };
            }
            catch (error) {
                console.error('Error fetching book information:', error);
                throw new Error('Failed to fetch book information. Please check the URL and try again.');
            }
        });
    }
    /**
     * HTMLコンテンツからジャンル情報を抽出
     */
    extractGenreInfo(htmlContent, baseUrl) {
        let genre = 'Fiction'; // デフォルトのジャンル
        let genreUrl = ''; // ジャンルのURL
        // パンくずリストからカテゴリ階層を取得
        const breadcrumbsMatch = htmlContent.match(/id="wayfinding-breadcrumbs_feature_div"[^>]*>([\s\S]*?)<\/div>/);
        if (breadcrumbsMatch) {
            const breadcrumbs = breadcrumbsMatch[1];
            // リンクを含むすべてのaタグを抽出
            const categoryLinkElements = breadcrumbs.match(/<a[^>]*href="([^"]*)"[^>]*>([^<]+)<\/a>/g);
            if (categoryLinkElements && categoryLinkElements.length > 0) {
                // 最後のカテゴリを使用
                const lastCategoryIndex = categoryLinkElements.length - 1;
                const lastCategoryElement = categoryLinkElements[lastCategoryIndex];
                // カテゴリ名を抽出
                const categoryTextMatch = lastCategoryElement.match(/>([^<]+)</);
                if (categoryTextMatch) {
                    genre = categoryTextMatch[1].trim();
                }
                // URLを抽出
                const hrefMatch = lastCategoryElement.match(/href="([^"]*)"/);
                if (hrefMatch) {
                    genreUrl = hrefMatch[1];
                    genreUrl = this.normalizeUrl(genreUrl, baseUrl);
                }
            }
        }
        // 他の方法でもジャンル情報を探す
        if (genre === 'Fiction' || genre === 'Kindle Store') {
            const genreMatch = htmlContent.match(/<a class="a-link-normal a-color-tertiary"[^>]*href="([^"]*)"[^>]*>([^<]+)<\/a>/);
            if (genreMatch && genreMatch[2] && genreMatch[2].trim() !== 'Kindle Store') {
                genre = genreMatch[2].trim();
                if (genreMatch[1]) {
                    genreUrl = genreMatch[1];
                    genreUrl = this.normalizeUrl(genreUrl, baseUrl);
                }
            }
        }
        return { genre, genreUrl };
    }
    /**
     * 相対URLを絶対URLに変換
     */
    normalizeUrl(url, baseUrl) {
        if (url.startsWith('/')) {
            const urlParts = baseUrl.match(/^(https?:\/\/[^\/]+)\//);
            if (urlParts) {
                return urlParts[1] + url;
            }
        }
        return url;
    }
    /**
     * タイムアウト付きのfetchを実行
     * @param url 取得するURL
     * @param timeoutMs タイムアウト時間（ミリ秒）
     * @returns Response オブジェクト
     */
    fetchWithTimeout(url, timeoutMs = 10000) {
        // AbortControllerを使ってタイムアウトを実装
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), timeoutMs);
        return fetch(url, { signal: controller.signal })
            .finally(() => clearTimeout(timeoutId));
    }
    /**
     * リトライ機能付きのfetch
     * @param url 取得するURL
     * @param options fetchオプション
     * @param retries リトライ回数
     * @param timeoutMs タイムアウト時間（ミリ秒）
     * @returns Response オブジェクト
     */
    fetchWithRetry(url_1) {
        return __awaiter(this, arguments, void 0, function* (url, options = {}, retries = 3, timeoutMs = 10000) {
            let lastError = null;
            for (let i = 0; i < retries; i++) {
                try {
                    // 指数バックオフでリトライ間隔を増やす（最初のトライではウェイトなし）
                    if (i > 0) {
                        const waitTime = Math.min(1000 * Math.pow(2, i - 1), 10000);
                        yield new Promise(resolve => setTimeout(resolve, waitTime));
                    }
                    return yield this.fetchWithTimeout(url, timeoutMs);
                }
                catch (error) {
                    lastError = error instanceof Error ? error : new Error(String(error));
                    console.log(`Fetch attempt ${i + 1} failed: ${lastError.message}`);
                }
            }
            throw lastError || new Error('Failed to fetch after multiple retries');
        });
    }
    /**
     * URLからHTMLコンテンツを取得（複数のプロキシを試す）
     */
    fetchHtmlContent(url) {
        return __awaiter(this, void 0, void 0, function* () {
            // CORSの問題を回避するためにプロキシサービスを使用
            const proxyUrls = [
                `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`,
                `https://corsproxy.io/?${encodeURIComponent(url)}`,
                `https://cors-anywhere.herokuapp.com/${url}`
            ];
            let htmlContent = '';
            let proxyError = '';
            // プロキシを順番に試す
            for (const proxyUrl of proxyUrls) {
                try {
                    // 改良版のfetchを使用
                    const response = yield this.fetchWithRetry(proxyUrl, {}, 2, 15000);
                    if (!response.ok) {
                        proxyError = `Failed to fetch data: ${response.status}`;
                        continue;
                    }
                    // レスポンスタイプを確認
                    const contentType = response.headers.get('content-type');
                    if (contentType && contentType.includes('application/json')) {
                        // JSONレスポンスの場合
                        const responseData = yield response.json();
                        if (responseData.contents) {
                            // allorigins形式のレスポンス
                            htmlContent = responseData.contents;
                        }
                    }
                    else {
                        // テキスト/HTMLレスポンスの場合
                        htmlContent = yield response.text();
                    }
                    // 成功したらループを抜ける
                    if (htmlContent)
                        break;
                }
                catch (err) {
                    proxyError = `Proxy error: ${err instanceof Error ? err.message : String(err)}`;
                    continue;
                }
            }
            if (!htmlContent) {
                throw new Error(`Failed to fetch content: ${proxyError}`);
            }
            return htmlContent;
        });
    }
    /**
     * メインコンテンツを抽出するヘルパーメソッド
     */
    extractMainContent(html) {
        // 一般的なコンテンツコンテナを探す
        const contentMatches = [
            html.match(/<article[^>]*>([\s\S]*?)<\/article>/),
            html.match(/<main[^>]*>([\s\S]*?)<\/main>/),
            html.match(/<div[^>]*?class="[^"]*?content[^"]*?"[^>]*>([\s\S]*?)<\/div>/i),
            html.match(/<div[^>]*?class="[^"]*?entry[^"]*?"[^>]*>([\s\S]*?)<\/div>/i),
            html.match(/<div[^>]*?class="[^"]*?post[^"]*?"[^>]*>([\s\S]*?)<\/div>/i)
        ];
        for (const match of contentMatches) {
            if (match && match[1]) {
                return match[1];
            }
        }
        // メインコンテンツが見つからない場合はbodyタグの中身を返す
        const bodyMatch = html.match(/<body[^>]*>([\s\S]*?)<\/body>/);
        return bodyMatch ? bodyMatch[1] : html;
    }
    /**
     * Anthropic APIで要約を生成するメソッド
     */
    generateSummaryWithAnthropic(content) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a;
            const apiKey = this.settings.anthropicApiKey;
            if (!apiKey) {
                // APIキーが設定されていない場合は適切なメッセージを返す
                return 'No summary available. Please set an Anthropic API key in settings to enable automatic summarization.';
            }
            const maxContentLength = 10000; // 長すぎるコンテンツは切り詰める
            const truncatedContent = content.length > maxContentLength ?
                content.substring(0, maxContentLength) + '...' : content;
            const prompt = `
Here's the content of a technical blog post. Please summarize it in a concise way, highlighting the main points, key technical concepts, and any important conclusions:

${truncatedContent}

Summary:`;
            try {
                const response = yield fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': apiKey,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: this.settings.llmModel,
                        max_tokens: 1000,
                        messages: [
                            { role: 'user', content: prompt }
                        ]
                    })
                });
                if (!response.ok) {
                    const errorData = yield response.json();
                    throw new Error(`Anthropic API Error: ${((_a = errorData.error) === null || _a === void 0 ? void 0 : _a.message) || response.statusText}`);
                }
                const data = yield response.json();
                return data.content[0].text || 'No summary available.';
            }
            catch (error) {
                console.error('Error calling Anthropic API:', error);
                // エラーメッセージをユーザーフレンドリーにする
                return `Unable to generate summary: ${error instanceof Error ? error.message : String(error)}. Check your API key and try again.`;
            }
        });
    }
    /**
     * HTMLタグを除去するヘルパーメソッド（改行を維持）
     */
    cleanHtml(html) {
        // <br>や</p>タグを改行に置換してから他のHTMLタグを削除
        return html
            .replace(/<br[^>]*>/gi, '\n')
            .replace(/<\/p>/gi, '\n\n')
            .replace(/<[^>]*>/g, ' ')
            .replace(/\s{2,}/g, ' ')
            .trim();
    }
    /**
     * Obsidianのタグやリンクに干渉する文字を除去し、Markdownリンクを作成
     */
    createMarkdownLink(title, url) {
        // Obsidianのタグやリンクに使われる特殊文字を除去
        const cleanTitle = title.replace(/[#\[\]|]/g, '').trim();
        // Markdown形式のリンクを作成
        return `[${cleanTitle}](${url})`;
    }
    /**
     * カーソル位置のURLを取得するヘルパーメソッド
     */
    getUrlUnderCursor(editor) {
        const cursorPos = editor.getCursor();
        const line = editor.getLine(cursorPos.line);
        // 現在の行でURLを検索
        let match;
        while ((match = URL_PATTERN.exec(line)) !== null) {
            const start = match.index;
            const end = start + match[0].length;
            // カーソルがURLの範囲内にある場合
            if (cursorPos.ch >= start && cursorPos.ch <= end) {
                return match[0];
            }
        }
        // 正規表現のインデックスをリセット
        URL_PATTERN.lastIndex = 0;
        // カーソルの直前または直後のURLも検索
        const matches = line.match(URL_PATTERN);
        if (matches) {
            // 最も近いURLを探す
            let closestUrl = null;
            let minDistance = Number.MAX_VALUE;
            for (const url of matches) {
                const start = line.indexOf(url);
                const end = start + url.length;
                const distanceToStart = Math.abs(cursorPos.ch - start);
                const distanceToEnd = Math.abs(cursorPos.ch - end);
                const minDist = Math.min(distanceToStart, distanceToEnd);
                if (minDist < minDistance) {
                    minDistance = minDist;
                    closestUrl = url;
                }
            }
            // カーソルから10文字以内にURLがある場合は取得
            if (minDistance <= 10) {
                return closestUrl;
            }
        }
        return null;
    }
}
/**
 * 書籍URL入力用のモーダル
 */
class BookUrlModal extends obsidian.Modal {
    constructor(app, plugin) {
        super(app);
        this.url = '';
        this.plugin = plugin;
    }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl('h2', { text: 'Enter Amazon Book URL' });
        // URL入力フィールド
        const urlInputContainer = contentEl.createDiv();
        this.urlInput = urlInputContainer.createEl('input', {
            attr: {
                type: 'text',
                placeholder: 'https://www.amazon.com/...'
            },
            cls: 'book-url-input'
        });
        this.urlInput.style.width = '100%';
        this.urlInput.style.marginBottom = '1em';
        this.urlInput.addEventListener('input', (e) => {
            this.url = e.target.value;
        });
        // 事前に設定されたURLがある場合は表示
        if (this.url) {
            this.urlInput.value = this.url;
        }
        // ローディングインジケータ（最初は非表示）
        this.loadingContainer = contentEl.createDiv({ cls: 'loading-container' });
        this.loadingContainer.style.display = 'none';
        this.loadingContainer.createDiv({ cls: 'loading-spinner' });
        this.loadingContainer.createDiv({ cls: 'loading-text', text: 'Fetching book information...' });
        // ボタンコンテナ
        this.buttonContainer = contentEl.createDiv();
        this.buttonContainer.style.display = 'flex';
        this.buttonContainer.style.justifyContent = 'flex-end';
        this.buttonContainer.style.gap = '0.5em';
        // キャンセルボタン
        const cancelButton = this.buttonContainer.createEl('button', { text: 'Cancel' });
        cancelButton.addEventListener('click', () => this.close());
        // 作成ボタン
        const createButton = this.buttonContainer.createEl('button', { text: 'Create', cls: 'mod-cta' });
        createButton.addEventListener('click', () => __awaiter(this, void 0, void 0, function* () {
            this.startProcessing();
        }));
        // 入力フィールドにフォーカス
        this.urlInput.focus();
    }
    // URLからカード作成処理を開始
    startProcessing() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.url) {
                new obsidian.Notice('Please enter a valid Amazon URL');
                return;
            }
            try {
                // ローディングインジケータを表示し、ボタンを非表示
                this.loadingContainer.style.display = 'flex';
                this.buttonContainer.style.display = 'none';
                // Notice表示も併用
                new obsidian.Notice('Fetching book information...');
                const bookInfo = yield this.plugin.fetchBookInfo(this.url);
                // 生成中のメッセージに更新
                const loadingText = this.loadingContainer.querySelector('.loading-text');
                if (loadingText) {
                    loadingText.innerText = 'Creating book card...';
                }
                yield this.plugin.createNoteFromTemplate(bookInfo);
                this.close();
            }
            catch (error) {
                // エラー時はローディングを非表示にしてボタンを再表示
                this.loadingContainer.style.display = 'none';
                this.buttonContainer.style.display = 'flex';
                new obsidian.Notice(`Error: ${error instanceof Error ? error.message : String(error)}`);
            }
        });
    }
    onClose() {
        const { contentEl } = this;
        contentEl.empty();
    }
}
/**
 * 設定タブの実装
 */
class BookCardCreatorSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        const { containerEl } = this;
        containerEl.empty();
        // プラグイン固有のクラスを追加
        containerEl.addClass('book-card-creator');
        containerEl.createEl('h2', { text: 'Book Card Creator Settings' });
        // セクションを明確に分けて表示
        this.renderAmazonBookSection(containerEl);
        this.renderTechBlogSection(containerEl);
        this.renderApiSection(containerEl);
        this.renderTemplateVariables(containerEl);
    }
    // Amazon Book Cardsの設定セクション
    renderAmazonBookSection(containerEl) {
        const amazonSection = containerEl.createDiv('settings-section');
        amazonSection.createEl('h3', { text: 'Amazon Book Cards Settings' });
        // 書籍用テンプレートファイルの設定
        new obsidian.Setting(amazonSection)
            .setName('Book template file')
            .setDesc('Select the template file for Amazon book cards')
            .addText(text => text
            .setPlaceholder('Example: templates/book-template.md')
            .setValue(this.plugin.settings.bookTemplatePath)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.bookTemplatePath = value;
            yield this.plugin.saveSettings();
        })))
            .addButton(button => button
            .setButtonText('Browse')
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            // 既存のファイルを選択するための新しいモーダルを作成
            new FileSelectorModal(this.app, (file) => {
                this.plugin.settings.bookTemplatePath = file.path;
                this.plugin.saveSettings();
                this.display(); // 設定画面を更新
            }).open();
        })));
        // 書籍用出力フォルダの設定
        new obsidian.Setting(amazonSection)
            .setName('Book output folder')
            .setDesc('Select the folder where Amazon book cards will be created')
            .addText(text => text
            .setPlaceholder('Example: Books')
            .setValue(this.plugin.settings.bookOutputFolder)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.bookOutputFolder = value;
            yield this.plugin.saveSettings();
        })))
            .addButton(button => button
            .setButtonText('Browse')
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            // フォルダを選択するための新しいモーダルを作成
            new FolderSelectorModal(this.app, (folder) => {
                this.plugin.settings.bookOutputFolder = folder.path;
                this.plugin.saveSettings();
                this.display(); // 設定画面を更新
            }).open();
        })));
    }
    // Tech Blog Cardsの設定セクション
    renderTechBlogSection(containerEl) {
        const blogSection = containerEl.createDiv('settings-section');
        blogSection.createEl('h3', { text: 'Tech Blog Cards Settings' });
        // ブログ用テンプレートファイルの設定
        new obsidian.Setting(blogSection)
            .setName('Blog template file')
            .setDesc('Select the template file for tech blog cards')
            .addText(text => text
            .setPlaceholder('Example: templates/blog-template.md')
            .setValue(this.plugin.settings.blogTemplatePath)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.blogTemplatePath = value;
            yield this.plugin.saveSettings();
        })))
            .addButton(button => button
            .setButtonText('Browse')
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            // 既存のファイルを選択するための新しいモーダルを作成
            new FileSelectorModal(this.app, (file) => {
                this.plugin.settings.blogTemplatePath = file.path;
                this.plugin.saveSettings();
                this.display(); // 設定画面を更新
            }).open();
        })));
        // ブログ用出力フォルダの設定
        new obsidian.Setting(blogSection)
            .setName('Blog output folder')
            .setDesc('Select the folder where tech blog cards will be created')
            .addText(text => text
            .setPlaceholder('Example: TechBlogs')
            .setValue(this.plugin.settings.blogOutputFolder)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.blogOutputFolder = value;
            yield this.plugin.saveSettings();
        })))
            .addButton(button => button
            .setButtonText('Browse')
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            // フォルダを選択するための新しいモーダルを作成
            new FolderSelectorModal(this.app, (folder) => {
                this.plugin.settings.blogOutputFolder = folder.path;
                this.plugin.saveSettings();
                this.display(); // 設定画面を更新
            }).open();
        })));
    }
    // API設定セクション
    renderApiSection(containerEl) {
        const apiSection = containerEl.createDiv('settings-section');
        apiSection.createEl('h3', { text: 'API Settings for Blog Summarization' });
        // Anthropic API Keyの設定
        new obsidian.Setting(apiSection)
            .setName('Anthropic API Key')
            .setDesc('Enter your Anthropic API key for tech blog summary generation')
            .addText(text => text
            .setPlaceholder('sk-ant-...')
            .setValue(this.plugin.settings.anthropicApiKey)
            .setDisabled(false)
            .inputEl.type = 'password')
            .addExtraButton(btn => btn
            .setIcon('reset')
            .setTooltip('Save API Key')
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            const inputEl = apiSection.querySelector('input[type="password"]');
            this.plugin.settings.anthropicApiKey = inputEl.value;
            yield this.plugin.saveSettings();
            new obsidian.Notice('API Key saved');
        })));
        // LLMモデルの選択
        new obsidian.Setting(apiSection)
            .setName('Claude Model')
            .setDesc('Select which Claude model to use for blog summarization')
            .addDropdown(dropdown => dropdown
            .addOption('claude-3-haiku-20240307', 'Claude 3 Haiku (Fast)')
            .addOption('claude-3-sonnet-20240229', 'Claude 3 Sonnet (Balanced)')
            .addOption('claude-3-opus-20240229', 'Claude 3 Opus (Powerful)')
            .setValue(this.plugin.settings.llmModel)
            .onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.llmModel = value;
            yield this.plugin.saveSettings();
        })));
    }
    // テンプレート変数の説明セクション
    renderTemplateVariables(containerEl) {
        const variablesSection = containerEl.createDiv('settings-section');
        variablesSection.createEl('h3', { text: 'Template Variables' });
        const templateInfo = variablesSection.createEl('div');
        templateInfo.innerHTML = `
			<p>You can use the following variables in your templates:</p>
			<h4>For Amazon Book templates:</h4>
			<ul>
				<li><code>{{book-creator:title}}</code> - Book title</li>
				<li><code>{{book-creator:author}}</code> - Book author</li>
				<li><code>{{book-creator:genre}}</code> - Book genre</li>
				<li><code>{{book-creator:genre-link}}</code> - Markdown link to genre page</li>
				<li><code>{{book-creator:summary}}</code> - Book summary</li>
				<li><code>{{book-creator:amazon-link}}</code> - Markdown link to Amazon page</li>
			</ul>
			<h4>For Tech Blog templates:</h4>
			<ul>
				<li><code>{{blog-creator:title}}</code> - Blog title</li>
				<li><code>{{blog-creator:summary}}</code> - Blog summary</li>
				<li><code>{{blog-creator:blog-link}}</code> - Markdown link to blog page</li>
			</ul>
		`;
    }
}
// ファイル選択用のモーダル
class FileSelectorModal extends obsidian.Modal {
    constructor(app, onSelect) {
        super(app);
        this.onSelect = onSelect;
    }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl('h2', { text: 'Select Template File' });
        const fileList = contentEl.createDiv();
        fileList.style.maxHeight = '400px';
        fileList.style.overflow = 'auto';
        // マークダウンファイルの一覧を表示
        this.app.vault.getMarkdownFiles().forEach(file => {
            const fileItem = fileList.createEl('div', { cls: 'file-item' });
            fileItem.style.padding = '5px';
            fileItem.style.cursor = 'pointer';
            fileItem.style.borderBottom = '1px solid var(--background-modifier-border)';
            fileItem.innerHTML = `<span>${file.path}</span>`;
            fileItem.addEventListener('click', () => {
                this.onSelect(file);
                this.close();
            });
            fileItem.addEventListener('mouseenter', () => {
                fileItem.style.backgroundColor = 'var(--background-modifier-hover)';
            });
            fileItem.addEventListener('mouseleave', () => {
                fileItem.style.backgroundColor = '';
            });
        });
    }
    onClose() {
        const { contentEl } = this;
        contentEl.empty();
    }
}
/**
 * ブログURL入力用のモーダル
 */
class TechBlogUrlModal extends obsidian.Modal {
    constructor(app, plugin) {
        super(app);
        this.url = '';
        this.plugin = plugin;
    }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl('h2', { text: 'Enter Tech Blog URL' });
        // URL入力フィールド
        const urlInputContainer = contentEl.createDiv();
        this.urlInput = urlInputContainer.createEl('input', {
            attr: {
                type: 'text',
                placeholder: 'https://blog.example.com/...'
            },
            cls: 'blog-url-input'
        });
        this.urlInput.style.width = '100%';
        this.urlInput.style.marginBottom = '1em';
        this.urlInput.addEventListener('input', (e) => {
            this.url = e.target.value;
        });
        // 事前に設定されたURLがある場合は表示
        if (this.url) {
            this.urlInput.value = this.url;
        }
        // APIキーの警告（設定されていない場合）
        if (!this.plugin.settings.anthropicApiKey) {
            const warningDiv = contentEl.createDiv();
            warningDiv.style.color = 'var(--text-error)';
            warningDiv.style.marginBottom = '1em';
            warningDiv.createEl('p', { text: 'Warning: Anthropic API Key is not set. LLM summary will not be available.' });
        }
        // 選択されているモデルの情報を表示
        const modelInfo = contentEl.createDiv();
        modelInfo.style.marginBottom = '1em';
        let modelName = this.getModelDisplayName(this.plugin.settings.llmModel);
        modelInfo.createEl('p', { text: `Selected model: ${modelName}` });
        // ローディングインジケータ（最初は非表示）
        this.loadingContainer = contentEl.createDiv({ cls: 'loading-container' });
        this.loadingContainer.style.display = 'none';
        this.loadingContainer.createDiv({ cls: 'loading-spinner' });
        this.loadingContainer.createDiv({ cls: 'loading-text', text: 'Fetching blog information...' });
        // ボタンコンテナ
        this.buttonContainer = contentEl.createDiv();
        this.buttonContainer.style.display = 'flex';
        this.buttonContainer.style.justifyContent = 'flex-end';
        this.buttonContainer.style.gap = '0.5em';
        // キャンセルボタン
        const cancelButton = this.buttonContainer.createEl('button', { text: 'Cancel' });
        cancelButton.addEventListener('click', () => this.close());
        // 作成ボタン
        const createButton = this.buttonContainer.createEl('button', { text: 'Create', cls: 'mod-cta' });
        createButton.addEventListener('click', () => __awaiter(this, void 0, void 0, function* () {
            this.startProcessing();
        }));
        // 入力フィールドにフォーカス
        this.urlInput.focus();
    }
    // モデル名の表示用文字列を取得
    getModelDisplayName(modelId) {
        const modelMap = {
            'claude-3-haiku-20240307': 'Claude 3 Haiku (Fast)',
            'claude-3-sonnet-20240229': 'Claude 3 Sonnet (Balanced)',
            'claude-3-opus-20240229': 'Claude 3 Opus (Powerful)'
        };
        return modelMap[modelId] || 'Unknown';
    }
    // URLからカード作成処理を開始
    startProcessing() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.url) {
                new obsidian.Notice('Please enter a valid tech blog URL');
                return;
            }
            try {
                // ローディングインジケータを表示し、ボタンを非表示
                this.loadingContainer.style.display = 'flex';
                this.buttonContainer.style.display = 'none';
                // Notice表示も併用
                new obsidian.Notice('Fetching blog information...');
                const blogInfo = yield this.plugin.fetchBlogInfo(this.url);
                // 生成中のメッセージに更新
                const loadingText = this.loadingContainer.querySelector('.loading-text');
                if (loadingText) {
                    loadingText.innerText = 'Creating blog card...';
                }
                yield this.plugin.createNoteFromTemplate(blogInfo);
                this.close();
            }
            catch (error) {
                // エラー時はローディングを非表示にしてボタンを再表示
                this.loadingContainer.style.display = 'none';
                this.buttonContainer.style.display = 'flex';
                new obsidian.Notice(`Error: ${error instanceof Error ? error.message : String(error)}`);
            }
        });
    }
    onClose() {
        const { contentEl } = this;
        contentEl.empty();
    }
}
/**
 * フォルダ選択用のモーダル
 */
class FolderSelectorModal extends obsidian.Modal {
    constructor(app, onSelect) {
        super(app);
        this.onSelect = onSelect;
    }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl('h2', { text: 'Select Output Folder' });
        const folderList = contentEl.createDiv();
        folderList.style.maxHeight = '400px';
        folderList.style.overflow = 'auto';
        // フォルダの一覧を取得して表示
        const folders = [];
        this.getAllFolders(this.app.vault.getRoot(), folders);
        folders.forEach(folder => {
            const folderItem = folderList.createEl('div', { cls: 'folder-item' });
            folderItem.style.padding = '5px';
            folderItem.style.cursor = 'pointer';
            folderItem.style.borderBottom = '1px solid var(--background-modifier-border)';
            folderItem.innerHTML = `<span>${folder.path || '/'}</span>`;
            folderItem.addEventListener('click', () => {
                this.onSelect(folder);
                this.close();
            });
            folderItem.addEventListener('mouseenter', () => {
                folderItem.style.backgroundColor = 'var(--background-modifier-hover)';
            });
            folderItem.addEventListener('mouseleave', () => {
                folderItem.style.backgroundColor = '';
            });
        });
    }
    // フォルダを再帰的に取得
    getAllFolders(folder, folders) {
        folders.push(folder);
        for (const child of folder.children) {
            if (child instanceof obsidian.TFolder) {
                this.getAllFolders(child, folders);
            }
        }
    }
    onClose() {
        const { contentEl } = this;
        contentEl.empty();
    }
}

module.exports = BookCardCreator;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSwgU3VwcHJlc3NlZEVycm9yLCBTeW1ib2wsIEl0ZXJhdG9yICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcclxuICAgIGZ1bmN0aW9uIGFjY2VwdChmKSB7IGlmIChmICE9PSB2b2lkIDAgJiYgdHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uIGV4cGVjdGVkXCIpOyByZXR1cm4gZjsgfVxyXG4gICAgdmFyIGtpbmQgPSBjb250ZXh0SW4ua2luZCwga2V5ID0ga2luZCA9PT0gXCJnZXR0ZXJcIiA/IFwiZ2V0XCIgOiBraW5kID09PSBcInNldHRlclwiID8gXCJzZXRcIiA6IFwidmFsdWVcIjtcclxuICAgIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xyXG4gICAgdmFyIGRlc2NyaXB0b3IgPSBkZXNjcmlwdG9ySW4gfHwgKHRhcmdldCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSkgOiB7fSk7XHJcbiAgICB2YXIgXywgZG9uZSA9IGZhbHNlO1xyXG4gICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluKSBjb250ZXh0W3BdID0gcCA9PT0gXCJhY2Nlc3NcIiA/IHt9IDogY29udGV4dEluW3BdO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xyXG4gICAgICAgIGNvbnRleHQuYWRkSW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAoZikgeyBpZiAoZG9uZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgaW5pdGlhbGl6ZXJzIGFmdGVyIGRlY29yYXRpb24gaGFzIGNvbXBsZXRlZFwiKTsgZXh0cmFJbml0aWFsaXplcnMucHVzaChhY2NlcHQoZiB8fCBudWxsKSk7IH07XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShraW5kID09PSBcImFjY2Vzc29yXCIgPyB7IGdldDogZGVzY3JpcHRvci5nZXQsIHNldDogZGVzY3JpcHRvci5zZXQgfSA6IGRlc2NyaXB0b3Jba2V5XSwgY29udGV4dCk7XHJcbiAgICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHR5cGVvZiByZXN1bHQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5zZXQpKSBkZXNjcmlwdG9yLnNldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5pbml0KSkgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKF8gPSBhY2NlcHQocmVzdWx0KSkge1xyXG4gICAgICAgICAgICBpZiAoa2luZCA9PT0gXCJmaWVsZFwiKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcclxuICAgICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcclxuICAgIGRvbmUgPSB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcnVuSW5pdGlhbGl6ZXJzKHRoaXNBcmcsIGluaXRpYWxpemVycywgdmFsdWUpIHtcclxuICAgIHZhciB1c2VWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YWx1ZSA9IHVzZVZhbHVlID8gaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZywgdmFsdWUpIDogaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSBcInN5bWJvbFwiID8geCA6IFwiXCIuY29uY2F0KHgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc2V0RnVuY3Rpb25OYW1lKGYsIG5hbWUsIHByZWZpeCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN5bWJvbFwiKSBuYW1lID0gbmFtZS5kZXNjcmlwdGlvbiA/IFwiW1wiLmNvbmNhdChuYW1lLmRlc2NyaXB0aW9uLCBcIl1cIikgOiBcIlwiO1xyXG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEl0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcclxuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xyXG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcclxuICAgICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgQXN5bmNJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gQXN5bmNJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiLCBhd2FpdFJldHVybiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIGF3YWl0UmV0dXJuKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodikudGhlbihmLCByZWplY3QpOyB9OyB9XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaWYgKGdbbl0pIHsgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgaWYgKGYpIGlbbl0gPSBmKGlbbl0pOyB9IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBmYWxzZSB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG52YXIgb3duS2V5cyA9IGZ1bmN0aW9uKG8pIHtcclxuICAgIG93bktleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiAobykge1xyXG4gICAgICAgIHZhciBhciA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGsgaW4gbykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrKSkgYXJbYXIubGVuZ3RoXSA9IGs7XHJcbiAgICAgICAgcmV0dXJuIGFyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBvd25LZXlzKG8pO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgPSBvd25LZXlzKG1vZCksIGkgPSAwOyBpIDwgay5sZW5ndGg7IGkrKykgaWYgKGtbaV0gIT09IFwiZGVmYXVsdFwiKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGtbaV0pO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEluKHN0YXRlLCByZWNlaXZlcikge1xyXG4gICAgaWYgKHJlY2VpdmVyID09PSBudWxsIHx8ICh0eXBlb2YgcmVjZWl2ZXIgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJlY2VpdmVyICE9PSBcImZ1bmN0aW9uXCIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHVzZSAnaW4nIG9wZXJhdG9yIG9uIG5vbi1vYmplY3RcIik7XHJcbiAgICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52LCB2YWx1ZSwgYXN5bmMpIHtcclxuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZC5cIik7XHJcbiAgICAgICAgdmFyIGRpc3Bvc2UsIGlubmVyO1xyXG4gICAgICAgIGlmIChhc3luYykge1xyXG4gICAgICAgICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5hc3luY0Rpc3Bvc2VdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGlzcG9zZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIGlmICghU3ltYm9sLmRpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuZGlzcG9zZSBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuZGlzcG9zZV07XHJcbiAgICAgICAgICAgIGlmIChhc3luYykgaW5uZXIgPSBkaXNwb3NlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIGRpc3Bvc2UgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBub3QgZGlzcG9zYWJsZS5cIik7XHJcbiAgICAgICAgaWYgKGlubmVyKSBkaXNwb3NlID0gZnVuY3Rpb24oKSB7IHRyeSB7IGlubmVyLmNhbGwodGhpcyk7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpOyB9IH07XHJcbiAgICAgICAgZW52LnN0YWNrLnB1c2goeyB2YWx1ZTogdmFsdWUsIGRpc3Bvc2U6IGRpc3Bvc2UsIGFzeW5jOiBhc3luYyB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFzeW5jKSB7XHJcbiAgICAgICAgZW52LnN0YWNrLnB1c2goeyBhc3luYzogdHJ1ZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxuXHJcbn1cclxuXHJcbnZhciBfU3VwcHJlc3NlZEVycm9yID0gdHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kaXNwb3NlUmVzb3VyY2VzKGVudikge1xyXG4gICAgZnVuY3Rpb24gZmFpbChlKSB7XHJcbiAgICAgICAgZW52LmVycm9yID0gZW52Lmhhc0Vycm9yID8gbmV3IF9TdXBwcmVzc2VkRXJyb3IoZSwgZW52LmVycm9yLCBcIkFuIGVycm9yIHdhcyBzdXBwcmVzc2VkIGR1cmluZyBkaXNwb3NhbC5cIikgOiBlO1xyXG4gICAgICAgIGVudi5oYXNFcnJvciA9IHRydWU7XHJcbiAgICB9XHJcbiAgICB2YXIgciwgcyA9IDA7XHJcbiAgICBmdW5jdGlvbiBuZXh0KCkge1xyXG4gICAgICAgIHdoaWxlIChyID0gZW52LnN0YWNrLnBvcCgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXIuYXN5bmMgJiYgcyA9PT0gMSkgcmV0dXJuIHMgPSAwLCBlbnYuc3RhY2sucHVzaChyKSwgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihuZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChyLmRpc3Bvc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gci5kaXNwb3NlLmNhbGwoci52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuYXN5bmMpIHJldHVybiBzIHw9IDIsIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4obmV4dCwgZnVuY3Rpb24oZSkgeyBmYWlsKGUpOyByZXR1cm4gbmV4dCgpOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgcyB8PSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzID09PSAxKSByZXR1cm4gZW52Lmhhc0Vycm9yID8gUHJvbWlzZS5yZWplY3QoZW52LmVycm9yKSA6IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIGlmIChlbnYuaGFzRXJyb3IpIHRocm93IGVudi5lcnJvcjtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXh0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbihwYXRoLCBwcmVzZXJ2ZUpzeCkge1xyXG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSBcInN0cmluZ1wiICYmIC9eXFwuXFwuP1xcLy8udGVzdChwYXRoKSkge1xyXG4gICAgICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcLih0c3gpJHwoKD86XFwuZCk/KSgoPzpcXC5bXi4vXSs/KT8pXFwuKFtjbV0/KXRzJC9pLCBmdW5jdGlvbiAobSwgdHN4LCBkLCBleHQsIGNtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c3ggPyBwcmVzZXJ2ZUpzeCA/IFwiLmpzeFwiIDogXCIuanNcIiA6IGQgJiYgKCFleHQgfHwgIWNtKSA/IG0gOiAoZCArIGV4dCArIFwiLlwiICsgY20udG9Mb3dlckNhc2UoKSArIFwianNcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGF0aDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgX19leHRlbmRzOiBfX2V4dGVuZHMsXHJcbiAgICBfX2Fzc2lnbjogX19hc3NpZ24sXHJcbiAgICBfX3Jlc3Q6IF9fcmVzdCxcclxuICAgIF9fZGVjb3JhdGU6IF9fZGVjb3JhdGUsXHJcbiAgICBfX3BhcmFtOiBfX3BhcmFtLFxyXG4gICAgX19lc0RlY29yYXRlOiBfX2VzRGVjb3JhdGUsXHJcbiAgICBfX3J1bkluaXRpYWxpemVyczogX19ydW5Jbml0aWFsaXplcnMsXHJcbiAgICBfX3Byb3BLZXk6IF9fcHJvcEtleSxcclxuICAgIF9fc2V0RnVuY3Rpb25OYW1lOiBfX3NldEZ1bmN0aW9uTmFtZSxcclxuICAgIF9fbWV0YWRhdGE6IF9fbWV0YWRhdGEsXHJcbiAgICBfX2F3YWl0ZXI6IF9fYXdhaXRlcixcclxuICAgIF9fZ2VuZXJhdG9yOiBfX2dlbmVyYXRvcixcclxuICAgIF9fY3JlYXRlQmluZGluZzogX19jcmVhdGVCaW5kaW5nLFxyXG4gICAgX19leHBvcnRTdGFyOiBfX2V4cG9ydFN0YXIsXHJcbiAgICBfX3ZhbHVlczogX192YWx1ZXMsXHJcbiAgICBfX3JlYWQ6IF9fcmVhZCxcclxuICAgIF9fc3ByZWFkOiBfX3NwcmVhZCxcclxuICAgIF9fc3ByZWFkQXJyYXlzOiBfX3NwcmVhZEFycmF5cyxcclxuICAgIF9fc3ByZWFkQXJyYXk6IF9fc3ByZWFkQXJyYXksXHJcbiAgICBfX2F3YWl0OiBfX2F3YWl0LFxyXG4gICAgX19hc3luY0dlbmVyYXRvcjogX19hc3luY0dlbmVyYXRvcixcclxuICAgIF9fYXN5bmNEZWxlZ2F0b3I6IF9fYXN5bmNEZWxlZ2F0b3IsXHJcbiAgICBfX2FzeW5jVmFsdWVzOiBfX2FzeW5jVmFsdWVzLFxyXG4gICAgX19tYWtlVGVtcGxhdGVPYmplY3Q6IF9fbWFrZVRlbXBsYXRlT2JqZWN0LFxyXG4gICAgX19pbXBvcnRTdGFyOiBfX2ltcG9ydFN0YXIsXHJcbiAgICBfX2ltcG9ydERlZmF1bHQ6IF9faW1wb3J0RGVmYXVsdCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0OiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEluOiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4sXHJcbiAgICBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZTogX19hZGREaXNwb3NhYmxlUmVzb3VyY2UsXHJcbiAgICBfX2Rpc3Bvc2VSZXNvdXJjZXM6IF9fZGlzcG9zZVJlc291cmNlcyxcclxuICAgIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uOiBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbixcclxufTtcclxuIiwiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURm9sZGVyLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuaW50ZXJmYWNlIEJvb2tDYXJkQ3JlYXRvclNldHRpbmdzIHtcblx0Ym9va1RlbXBsYXRlUGF0aDogc3RyaW5nO1xuXHRib29rT3V0cHV0Rm9sZGVyOiBzdHJpbmc7XG5cdGJsb2dUZW1wbGF0ZVBhdGg6IHN0cmluZztcblx0YmxvZ091dHB1dEZvbGRlcjogc3RyaW5nO1xuXHRhbnRocm9waWNBcGlLZXk6IHN0cmluZztcblx0bGxtTW9kZWw6IHN0cmluZztcbn1cblxuLy8g44Kr44O844OJ44Gu5YWx6YCa44Kk44Oz44K/44O844OV44Kn44O844K5XG5pbnRlcmZhY2UgQ2FyZEluZm8ge1xuXHR0aXRsZTogc3RyaW5nO1xuXHRzdW1tYXJ5OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBCb29rSW5mbyBleHRlbmRzIENhcmRJbmZvIHtcblx0YXV0aG9yOiBzdHJpbmc7XG5cdGdlbnJlOiBzdHJpbmc7XG5cdGdlbnJlVXJsOiBzdHJpbmc7XG5cdGFtYXpvblVybDogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQmxvZ0luZm8gZXh0ZW5kcyBDYXJkSW5mbyB7XG5cdGJsb2dVcmw6IHN0cmluZztcbn1cblxuLy8g44Ki44OX44Oq44Gu44OH44OV44Kp44Or44OI6Kit5a6aXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBCb29rQ2FyZENyZWF0b3JTZXR0aW5ncyA9IHtcblx0Ym9va1RlbXBsYXRlUGF0aDogJycsXG5cdGJvb2tPdXRwdXRGb2xkZXI6ICcnLFxuXHRibG9nVGVtcGxhdGVQYXRoOiAnJyxcblx0YmxvZ091dHB1dEZvbGRlcjogJycsXG5cdGFudGhyb3BpY0FwaUtleTogJycsXG5cdGxsbU1vZGVsOiAnY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDcnXG59XG5cbi8vIFVSTOODkeOCv+ODvOODs+OBruato+imj+ihqOePvlxuY29uc3QgVVJMX1BBVFRFUk4gPSAvKGh0dHBzPzpcXC9cXC9bXlxccygpPD5dKyg/OlxcKFtcXHdcXGRdK1xcKXwoW14hXFxzKCk8Pi4sOzonXCJbXFxde31dfFxcLykpKS9nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb29rQ2FyZENyZWF0b3IgZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogQm9va0NhcmRDcmVhdG9yU2V0dGluZ3M7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGNvbnNvbGUubG9nKCdMb2FkaW5nIEJvb2sgQ2FyZCBDcmVhdG9yIHBsdWdpbiB2MS4zLjEnKTtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Ly8g44K544K/44Kk44Or44K344O844OI44KS6Kqt44G/6L6844KAXG5cdFx0dGhpcy5sb2FkU3R5bGVzKCk7XG5cblx0XHQvLyDjgrPjg57jg7Pjg4njg5Hjg6zjg4Pjg4jjgavjgrPjg57jg7Pjg4njgpLov73liqBcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdjcmVhdGUtYm9vay1jYXJkJyxcblx0XHRcdG5hbWU6ICdDcmVhdGUgQm9vayBDYXJkIGZyb20gQW1hem9uIFVSTCcsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRuZXcgQm9va1VybE1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyDmioDooZPjg5bjg63jgrDjgYvjgonjgqvjg7zjg4njgpLkvZzmiJDjgZnjgovjgrPjg57jg7Pjg4njgpLov73liqBcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdjcmVhdGUtdGVjaC1ibG9nLWNhcmQnLFxuXHRcdFx0bmFtZTogJ0NyZWF0ZSBUZWNoIEJsb2cgQ2FyZCBmcm9tIFVSTCcsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRuZXcgVGVjaEJsb2dVcmxNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8g44Kr44O844K944Or5LiL44GuVVJM44GL44KJ44Kr44O844OJ44KS5L2c5oiQ44GZ44KL44Kz44Oe44Oz44OJ44KS6L+95YqgXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnY3JlYXRlLWNhcmQtZnJvbS1jdXJzb3InLFxuXHRcdFx0bmFtZTogJ0NyZWF0ZSBDYXJkIGZyb20gVVJMIHVuZGVyIGN1cnNvcicsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyDjgqvjg7zjgr3jg6vkvY3nva7jga5VUkzjgpLlj5blvpdcblx0XHRcdFx0XHRjb25zdCB1cmwgPSB0aGlzLmdldFVybFVuZGVyQ3Vyc29yKGVkaXRvcik7XG5cdFx0XHRcdFx0aWYgKCF1cmwpIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ05vIFVSTCBmb3VuZCB1bmRlciBjdXJzb3InKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYEZvdW5kIFVSTCB1bmRlciBjdXJzb3I6ICR7dXJsfWApO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFVSTOOBrueorumhnuOBq+WfuuOBpeOBhOOBpumBqeWIh+OBquODouODvOODgOODq+OCkumWi+OBj1xuXHRcdFx0XHRcdHRoaXMub3Blbk1vZGFsRm9yVXJsKHVybCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBVUkwgdW5kZXIgY3Vyc29yOicsIGVycm9yKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBFcnJvciBwcm9jZXNzaW5nIFVSTDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIOioreWumuOCv+ODluOCkui/veWKoFxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQm9va0NhcmRDcmVhdG9yU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHRcdFxuXHRcdGNvbnNvbGUubG9nKCdCb29rIENhcmQgQ3JlYXRvciBwbHVnaW4gbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVVJM44Gu56iu6aGe44KS5qSc5Ye644GZ44KLXG5cdCAqIEBwYXJhbSB1cmwg5qSc5p+75a++6LGh44GuVVJMXG5cdCAqIEByZXR1cm5zIFVSTOOBrueorumhniAoJ2FtYXpvbicg44G+44Gf44GvICdibG9nJylcblx0ICovXG5cdHByaXZhdGUgZGV0ZWN0VXJsVHlwZSh1cmw6IHN0cmluZyk6ICdhbWF6b24nIHwgJ2Jsb2cnIHtcblx0XHQvLyBVUkzjga7jg5Djg6rjg4fjg7zjgrfjg6fjg7Ncblx0XHRpZiAoIXVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgJiYgIXVybC5zdGFydHNXaXRoKCdodHRwczovLycpKSB7XG5cdFx0XHQvLyDlrozlhajjgapVUkzjgafjgarjgYTloLTlkIjjga/jg5bjg63jgrDjgajjgZfjgabmibHjgYZcblx0XHRcdHJldHVybiAnYmxvZyc7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEFtYXpvbuOBruikh+aVsOOBruODieODoeOCpOODs+ODkeOCv+ODvOODs+OBq+WvvuW/nFxuXHRcdGNvbnN0IGFtYXpvbkRvbWFpbnMgPSBbXG5cdFx0XHQnYW1hem9uLmNvbScsIFxuXHRcdFx0J2FtYXpvbi5jby5qcCcsIFxuXHRcdFx0J2FtYXpvbi5jby51aycsIFxuXHRcdFx0J2FtYXpvbi5kZScsIFxuXHRcdFx0J2FtYXpvbi5mcicsIFxuXHRcdFx0J2FtYXpvbi5pdCcsIFxuXHRcdFx0J2FtYXpvbi5lcycsIFxuXHRcdFx0J2FtYXpvbi5jYScsIFxuXHRcdFx0J2FtYXpvbi5pbicsIFxuXHRcdFx0J2FtYXpvbi5jb20uYXUnLCBcblx0XHRcdCdhbWF6b24uY29tLmJyJywgXG5cdFx0XHQnYW1hem9uLm5sJywgXG5cdFx0XHQnYW1hem9uLmNvbS5teCcsIFxuXHRcdFx0J2Ftem4udG8nLCAvLyDnn63nuK5VUkxcblx0XHRcdCdhLmNvJyAvLyDnn63nuK5VUkxcblx0XHRdO1xuXHRcdFxuXHRcdHRyeSB7XG5cdFx0XHQvLyBVUkzjgqrjg5bjgrjjgqfjgq/jg4jjgpLkvZzmiJDjgZfjgabjg4njg6HjgqTjg7PjgpLlj5blvpdcblx0XHRcdGNvbnN0IHVybE9iaiA9IG5ldyBVUkwodXJsKTtcblx0XHRcdGNvbnN0IGRvbWFpbiA9IHVybE9iai5ob3N0bmFtZTtcblx0XHRcdFxuXHRcdFx0Ly8gQW1hem9u44OJ44Oh44Kk44Oz44GL44Gp44GG44GL44KS44OB44Kn44OD44KvXG5cdFx0XHRmb3IgKGNvbnN0IGFtYXpvbkRvbWFpbiBvZiBhbWF6b25Eb21haW5zKSB7XG5cdFx0XHRcdGlmIChkb21haW4uaW5jbHVkZXMoYW1hem9uRG9tYWluKSkge1xuXHRcdFx0XHRcdHJldHVybiAnYW1hem9uJztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHQvLyBVUkzjga7op6PmnpDjgavlpLHmlZfjgZfjgZ/loLTlkIjjga/jg63jgrDjgavoqJjpjLJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgVVJMOicsIGVycm9yKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8g44OH44OV44Kp44Or44OI44Gv44OW44Ot44Kw44Go44GX44Gm5omx44GGXG5cdFx0cmV0dXJuICdibG9nJztcblx0fVxuXG5cdC8vIFVSTOOBq+WfuuOBpeOBhOOBpumBqeWIh+OBquODouODvOODgOODq+OCkumWi+OBjeOAgeiHquWLleWHpueQhuOCkumWi+Wni1xuXHRwcml2YXRlIG9wZW5Nb2RhbEZvclVybCh1cmw6IHN0cmluZyk6IHZvaWQge1xuXHRcdGxldCBtb2RhbDogVXJsTW9kYWw7XG5cdFx0XG5cdFx0Ly8gVVJM44Gu56iu6aGe44KS5qSc5Ye6XG5cdFx0Y29uc3QgdXJsVHlwZSA9IHRoaXMuZGV0ZWN0VXJsVHlwZSh1cmwpO1xuXHRcdFxuXHRcdC8vIOmBqeWIh+OBquODouODvOODgOODq+OCkumBuOaKnlxuXHRcdGlmICh1cmxUeXBlID09PSAnYW1hem9uJykge1xuXHRcdFx0Ly8gQW1hem9u44Gu5aC05ZCI44Gv5pu457GN55So44Oi44O844OA44OrXG5cdFx0XHRtb2RhbCA9IG5ldyBCb29rVXJsTW9kYWwodGhpcy5hcHAsIHRoaXMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyDjgZ3jgozku6XlpJbjga/jg5bjg63jgrDnlKjjg6Ljg7zjg4Djg6tcblx0XHRcdG1vZGFsID0gbmV3IFRlY2hCbG9nVXJsTW9kYWwodGhpcy5hcHAsIHRoaXMpO1xuXHRcdH1cblx0XHRcblx0XHQvLyBVUkzjgpLoqK3lrprjgZfjgabjg6Ljg7zjg4Djg6vjgpLooajnpLpcblx0XHRtb2RhbC51cmwgPSB1cmw7XG5cdFx0bW9kYWwub3BlbigpO1xuXHRcdFxuXHRcdC8vIFVSTOOBjOWFpeWKm+a4iOOBv+OBquOBruOBp+iHquWLleeahOOBq+WHpueQhuOCkumWi+Wni++8iOWwkeOBl+mBheW7tuOBleOBm+OCi++8iVxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0bW9kYWwuc3RhcnRQcm9jZXNzaW5nKCk7XG5cdFx0fSwgMTAwKTtcblx0fVxuXHRcblx0Ly8g44OX44Op44Kw44Kk44Oz44Gu44K544K/44Kk44Or44K344O844OI44KS6Kqt44G/6L6844KAXG5cdGxvYWRTdHlsZXMoKSB7XG5cdFx0Ly8gT2JzaWRpYW7jga7jg5fjg6njgrDjgqTjg7Pjgafjgrnjgr/jgqTjg6vjgrfjg7zjg4jjgpLoqq3jgb/ovrzjgoDmraPjgZfjgYTmlrnms5Vcblx0XHQvLyDjg5fjg6njgrDjgqTjg7Pjga7jg57jg4vjg5Xjgqfjgrnjg4jjgafmjIflrprjgZXjgozjgZ9zdHlsZXMuY3Nz44GM6Ieq5YuV55qE44Gr6Kqt44G/6L6844G+44KM44KLXG5cdFx0Ly8g44GT44Gu44Oh44K944OD44OJ44Gv5bCG5p2l44Gu5ouh5by144Gu44Gf44KB44Gr5q6L44GX44Gm44GK44GPXG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0XHRjb25zb2xlLmxvZygnVW5sb2FkaW5nIEJvb2sgQ2FyZCBDcmVhdG9yIHBsdWdpbicpO1xuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHQvKipcblx0ICog44OV44Kh44Kk44Or44OR44K544GL44KJVEZpbGXjgqrjg5bjgrjjgqfjgq/jg4jjgpLlj5blvpfvvIjlrZjlnKjnorroqo3vvIlcblx0ICogQHBhcmFtIGZpbGVQYXRoIOODleOCoeOCpOODq+ODkeOCuVxuXHQgKiBAcmV0dXJucyBURmlsZeOCquODluOCuOOCp+OCr+ODiOOBvuOBn+OBr251bGxcblx0ICovXG5cdHByaXZhdGUgZ2V0VGVtcGxhdGVGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiBURmlsZSB8IG51bGwge1xuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXHRcdHJldHVybiBmaWxlIGluc3RhbmNlb2YgVEZpbGUgPyBmaWxlIDogbnVsbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIOODleOCqeODq+ODgOODkeOCueOBi+OCiVRGb2xkZXLjgqrjg5bjgrjjgqfjgq/jg4jjgpLlj5blvpfvvIjlrZjlnKjnorroqo3vvIlcblx0ICogQHBhcmFtIGZvbGRlclBhdGgg44OV44Kp44Or44OA44OR44K5XG5cdCAqIEByZXR1cm5zIFRGb2xkZXLjgqrjg5bjgrjjgqfjgq/jg4jjgb7jgZ/jga9udWxsXG5cdCAqL1xuXHRwcml2YXRlIGdldE91dHB1dEZvbGRlcihmb2xkZXJQYXRoOiBzdHJpbmcpOiBURm9sZGVyIHwgbnVsbCB7XG5cdFx0Y29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xuXHRcdHJldHVybiBmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyID8gZm9sZGVyIDogbnVsbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIOODleOCoeOCpOODq+WQjeOBq+S9v+eUqOOBp+OBjeOBquOBhOaWh+Wtl+OCkumZpOWOu1xuXHQgKiBAcGFyYW0gdGl0bGUg44OV44Kh44Kk44Or5ZCN44Gr5L2/44GE44Gf44GE44K/44Kk44OI44OrXG5cdCAqIEByZXR1cm5zIOWuieWFqOOBquODleOCoeOCpOODq+WQjVxuXHQgKi9cblx0cHJpdmF0ZSBzYW5pdGl6ZUZpbGVuYW1lKHRpdGxlOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aXRsZS5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIOOCq+ODvOODieaDheWgseOBi+OCieODhuODs+ODl+ODrOODvOODiOOCkuS9v+eUqOOBl+OBpuODjuODvOODiOOCkuS9nOaIkFxuXHQgKiBAcGFyYW0gY2FyZEluZm8gQm9va0luZm/jgYtCbG9nSW5mb+OCquODluOCuOOCp+OCr+ODiFxuXHQgKi9cblx0YXN5bmMgY3JlYXRlTm90ZUZyb21UZW1wbGF0ZShjYXJkSW5mbzogQm9va0luZm8gfCBCbG9nSW5mbykge1xuXHRcdGxldCB0ZW1wbGF0ZVBhdGggPSAnJztcblx0XHRsZXQgb3V0cHV0Rm9sZGVyUGF0aCA9ICcnO1xuXHRcdFxuXHRcdC8vIEJvb2tJbmZv44GLQmxvZ0luZm/jgYvjgpLliKTlrprjgZfjgabjg4bjg7Pjg5fjg6zjg7zjg4jjgajlh7rlipvjg5Xjgqnjg6vjg4DjgpLpgbjmip5cblx0XHRpZiAodGhpcy5pc0Jvb2tJbmZvKGNhcmRJbmZvKSkge1xuXHRcdFx0dGVtcGxhdGVQYXRoID0gdGhpcy5zZXR0aW5ncy5ib29rVGVtcGxhdGVQYXRoO1xuXHRcdFx0b3V0cHV0Rm9sZGVyUGF0aCA9IHRoaXMuc2V0dGluZ3MuYm9va091dHB1dEZvbGRlcjtcblx0XHR9IGVsc2UgaWYgKHRoaXMuaXNCbG9nSW5mbyhjYXJkSW5mbykpIHtcblx0XHRcdHRlbXBsYXRlUGF0aCA9IHRoaXMuc2V0dGluZ3MuYmxvZ1RlbXBsYXRlUGF0aDtcblx0XHRcdG91dHB1dEZvbGRlclBhdGggPSB0aGlzLnNldHRpbmdzLmJsb2dPdXRwdXRGb2xkZXI7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIOODhuODs+ODl+ODrOODvOODiOODleOCoeOCpOODq+OBjOWtmOWcqOOBmeOCi+OBi+eiuuiqjVxuXHRcdGNvbnN0IHRlbXBsYXRlRmlsZSA9IHRoaXMuZ2V0VGVtcGxhdGVGaWxlKHRlbXBsYXRlUGF0aCk7XG5cdFx0aWYgKCF0ZW1wbGF0ZUZpbGUpIHtcblx0XHRcdG5ldyBOb3RpY2UoJ1RlbXBsYXRlIGZpbGUgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgeW91ciBzZXR0aW5ncy4nKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyDlh7rlipvjg5Xjgqnjg6vjg4DjgYzlrZjlnKjjgZnjgovjgYvnorroqo1cblx0XHRjb25zdCBvdXRwdXRGb2xkZXIgPSB0aGlzLmdldE91dHB1dEZvbGRlcihvdXRwdXRGb2xkZXJQYXRoKTtcblx0XHRpZiAoIW91dHB1dEZvbGRlcikge1xuXHRcdFx0bmV3IE5vdGljZSgnT3V0cHV0IGZvbGRlciBub3QgZm91bmQuIFBsZWFzZSBjaGVjayB5b3VyIHNldHRpbmdzLicpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIOODhuODs+ODl+ODrOODvOODiOOBruWGheWuueOCkuWPluW+l1xuXHRcdGNvbnN0IHRlbXBsYXRlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQodGVtcGxhdGVGaWxlKTtcblxuXHRcdC8vIOODhuODs+ODl+ODrOODvOODiOOBruWGheWuueOCkue9ruaPm1xuXHRcdGxldCBuZXdDb250ZW50ID0gdGVtcGxhdGVDb250ZW50O1xuXHRcdFxuXHRcdC8vIEJvb2tJbmZv44GLQmxvZ0luZm/jgYvjgpLliKTlrprjgZfjgabpganliIfjgarnva7mj5vjgpLooYzjgYZcblx0XHRpZiAodGhpcy5pc0Jvb2tJbmZvKGNhcmRJbmZvKSkge1xuXHRcdFx0bmV3Q29udGVudCA9IHRoaXMuYXBwbHlCb29rVGVtcGxhdGUobmV3Q29udGVudCwgY2FyZEluZm8pO1xuXHRcdH0gZWxzZSBpZiAodGhpcy5pc0Jsb2dJbmZvKGNhcmRJbmZvKSkge1xuXHRcdFx0bmV3Q29udGVudCA9IHRoaXMuYXBwbHlCbG9nVGVtcGxhdGUobmV3Q29udGVudCwgY2FyZEluZm8pO1xuXHRcdH1cblxuXHRcdC8vIOODleOCoeOCpOODq+WQje+8iOOCv+OCpOODiOODq+OBi+OCieS4jeato+OBquaWh+Wtl+OCkumZpOWOu++8iVxuXHRcdGNvbnN0IGZpbGVOYW1lID0gYCR7dGhpcy5zYW5pdGl6ZUZpbGVuYW1lKGNhcmRJbmZvLnRpdGxlKX0ubWRgO1xuXHRcdGNvbnN0IGZpbGVQYXRoID0gYCR7b3V0cHV0Rm9sZGVyUGF0aH0vJHtmaWxlTmFtZX1gO1xuXG5cdFx0Ly8g5paw44GX44GE44OO44O844OI44KS5L2c5oiQXG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgbmV3Q29udGVudCk7XG5cdFx0XHRuZXcgTm90aWNlKGBDYXJkIGNyZWF0ZWQ6ICR7ZmlsZU5hbWV9YCk7XG5cdFx0XHRcblx0XHRcdC8vIOS9nOaIkOOBl+OBn+ODjuODvOODiOOCkumWi+OBj1xuXHRcdFx0Y29uc3QgbmV3RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cdFx0XHRpZiAobmV3RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUobmV3RmlsZSk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdG5ldyBOb3RpY2UoYEVycm9yIGNyZWF0aW5nIG5vdGU6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xuXHRcdH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIOabuOexjeaDheWgseOCkuODhuODs+ODl+ODrOODvOODiOOBq+mBqeeUqFxuXHQgKi9cblx0cHJpdmF0ZSBhcHBseUJvb2tUZW1wbGF0ZSh0ZW1wbGF0ZTogc3RyaW5nLCBib29rOiBCb29rSW5mbyk6IHN0cmluZyB7XG5cdFx0bGV0IHJlc3VsdCA9IHRlbXBsYXRlO1xuXHRcdFxuXHRcdC8vIOWfuuacrOaDheWgseOCkue9ruaPm1xuXHRcdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC97e2Jvb2stY3JlYXRvcjp0aXRsZX19L2csIGJvb2sudGl0bGUpO1xuXHRcdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC97e2Jvb2stY3JlYXRvcjphdXRob3J9fS9nLCB0aGlzLmNyZWF0ZU1hcmtkb3duTGluayhib29rLmF1dGhvciwgYCR7Ym9vay5hdXRob3J9YCkpO1xuXHRcdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC97e2Jvb2stY3JlYXRvcjpnZW5yZX19L2csIGJvb2suZ2VucmUpO1xuXHRcdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC97e2Jvb2stY3JlYXRvcjpzdW1tYXJ5fX0vZywgYm9vay5zdW1tYXJ5KTtcblx0XHRcblx0XHQvLyBBbWF6b24gVVJM44KSTWFya2Rvd27jg6rjg7Pjgq/jgajjgZfjgabmjL/lhaVcblx0XHRyZXN1bHQgPSByZXN1bHQucmVwbGFjZSgve3tib29rLWNyZWF0b3I6YW1hem9uLWxpbmt9fS9nLCBcblx0XHRcdHRoaXMuY3JlYXRlTWFya2Rvd25MaW5rKGJvb2sudGl0bGUsIGJvb2suYW1hem9uVXJsKSk7XG5cdFx0XG5cdFx0Ly8g44K444Oj44Oz44OrVVJM44Gu44Oq44Oz44Kv44KC5oy/5YWl77yI44K444Oj44Oz44OrVVJM44GM44GC44KL5aC05ZCI44Gu44G/77yJXG5cdFx0aWYgKGJvb2suZ2VucmVVcmwpIHtcblx0XHRcdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC97e2Jvb2stY3JlYXRvcjpnZW5yZS1saW5rfX0vZywgXG5cdFx0XHRcdHRoaXMuY3JlYXRlTWFya2Rvd25MaW5rKGJvb2suZ2VucmUsIGJvb2suZ2VucmVVcmwpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL3t7Ym9vay1jcmVhdG9yOmdlbnJlLWxpbmt9fS9nLCBib29rLmdlbnJlKTtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIOODluODreOCsOaDheWgseOCkuODhuODs+ODl+ODrOODvOODiOOBq+mBqeeUqFxuXHQgKi9cblx0cHJpdmF0ZSBhcHBseUJsb2dUZW1wbGF0ZSh0ZW1wbGF0ZTogc3RyaW5nLCBibG9nOiBCbG9nSW5mbyk6IHN0cmluZyB7XG5cdFx0bGV0IHJlc3VsdCA9IHRlbXBsYXRlO1xuXHRcdFxuXHRcdC8vIOWfuuacrOaDheWgseOCkue9ruaPm1xuXHRcdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC97e2Jsb2ctY3JlYXRvcjp0aXRsZX19L2csIGJsb2cudGl0bGUpO1xuXHRcdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC97e2Jsb2ctY3JlYXRvcjpzdW1tYXJ5fX0vZywgYmxvZy5zdW1tYXJ5KTtcblx0XHRcblx0XHQvLyBCbG9nIFVSTOOCkk1hcmtkb3du44Oq44Oz44Kv44Go44GX44Gm5oy/5YWlXG5cdFx0cmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL3t7YmxvZy1jcmVhdG9yOmJsb2ctbGlua319L2csIFxuXHRcdFx0dGhpcy5jcmVhdGVNYXJrZG93bkxpbmsoYmxvZy50aXRsZSwgYmxvZy5ibG9nVXJsKSk7XG5cdFx0XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIOWei+OCrOODvOODiTog5LiO44GI44KJ44KM44Gf44Kq44OW44K444Kn44Kv44OI44GMQm9va0luZm/lnovjgYvjganjgYbjgYvjgpLliKTlrppcblx0ICovXG5cdHByaXZhdGUgaXNCb29rSW5mbyhpbmZvOiBCb29rSW5mbyB8IEJsb2dJbmZvKTogaW5mbyBpcyBCb29rSW5mbyB7XG5cdFx0cmV0dXJuICdhbWF6b25VcmwnIGluIGluZm87XG5cdH1cblx0XG5cdC8qKlxuXHQgKiDlnovjgqzjg7zjg4k6IOS4juOBiOOCieOCjOOBn+OCquODluOCuOOCp+OCr+ODiOOBjEJsb2dJbmZv5Z6L44GL44Gp44GG44GL44KS5Yik5a6aXG5cdCAqL1xuXHRwcml2YXRlIGlzQmxvZ0luZm8oaW5mbzogQm9va0luZm8gfCBCbG9nSW5mbyk6IGluZm8gaXMgQmxvZ0luZm8ge1xuXHRcdHJldHVybiAnYmxvZ1VybCcgaW4gaW5mbztcblx0fVxuXG5cdC8qKlxuXHQgKiDjg5bjg63jgrBVUkzjgYvjgonmg4XloLHjgpLlj5blvpdcblx0ICovXG5cdGFzeW5jIGZldGNoQmxvZ0luZm8oYmxvZ1VybDogc3RyaW5nKTogUHJvbWlzZTxCbG9nSW5mbz4ge1xuXHRcdC8vIFVSTOOBruODkOODquODh+ODvOOCt+ODp+ODs1xuXHRcdGlmICghYmxvZ1VybC5pbmNsdWRlcygnaHR0cCcpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgQmxvZyBVUkwnKTtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Ly8gSFRNTOOCs+ODs+ODhuODs+ODhOOCkuWPluW+l1xuXHRcdFx0Y29uc3QgaHRtbENvbnRlbnQgPSBhd2FpdCB0aGlzLmZldGNoSHRtbENvbnRlbnQoYmxvZ1VybCk7XG5cdFx0XHRcblx0XHRcdC8vIEhUTUzjgYvjgonjg6Hjgr/jg4fjg7zjgr/jgpLmir3lh7pcblx0XHRcdGNvbnN0IHRpdGxlTWF0Y2ggPSBodG1sQ29udGVudC5tYXRjaCgvPHRpdGxlW14+XSo+KFtePF0rKTxcXC90aXRsZT4vKSB8fCBcblx0XHRcdFx0aHRtbENvbnRlbnQubWF0Y2goLzxoMVtePl0qPihbXjxdKyk8XFwvaDE+Lyk7XG5cdFx0XHRcblx0XHRcdC8vIOODmuODvOOCuOOCs+ODs+ODhuODs+ODhOOCkuWPluW+l1xuXHRcdFx0Y29uc3QgYm9keUNvbnRlbnQgPSB0aGlzLmV4dHJhY3RNYWluQ29udGVudChodG1sQ29udGVudCk7XG5cdFx0XHRjb25zdCBjbGVhbmVkQ29udGVudCA9IHRoaXMuY2xlYW5IdG1sKGJvZHlDb250ZW50KTtcblx0XHRcdFxuXHRcdFx0Ly8gQW50aHJvcGljIEFQSeOBp+imgee0hOOCkueUn+aIkFxuXHRcdFx0bGV0IHN1bW1hcnkgPSAnTm8gc3VtbWFyeSBhdmFpbGFibGUuJztcblx0XHRcdGlmIChjbGVhbmVkQ29udGVudCAmJiB0aGlzLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHN1bW1hcnkgPSBhd2FpdCB0aGlzLmdlbmVyYXRlU3VtbWFyeVdpdGhBbnRocm9waWMoY2xlYW5lZENvbnRlbnQpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYXRpbmcgc3VtbWFyeTonLCBlcnJvcik7XG5cdFx0XHRcdFx0c3VtbWFyeSA9ICdGYWlsZWQgdG8gZ2VuZXJhdGUgc3VtbWFyeTogJyArIChlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcikpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIOODh+ODvOOCv+OCkuaVtOW9ouOBl+OBpui/lOOBmVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dGl0bGU6IHRpdGxlTWF0Y2ggPyB0aXRsZU1hdGNoWzFdLnRyaW0oKSA6ICdVbmtub3duIFRpdGxlJyxcblx0XHRcdFx0c3VtbWFyeTogc3VtbWFyeSxcblx0XHRcdFx0YmxvZ1VybDogYmxvZ1VybFxuXHRcdFx0fTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgYmxvZyBpbmZvcm1hdGlvbjonLCBlcnJvcik7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBibG9nIGluZm9ybWF0aW9uLiBQbGVhc2UgY2hlY2sgdGhlIFVSTCBhbmQgdHJ5IGFnYWluLicpO1xuXHRcdH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFtYXpvbuOBruacrOOBrlVSTOOBi+OCieaDheWgseOCkuWPluW+l1xuXHQgKi9cblx0YXN5bmMgZmV0Y2hCb29rSW5mbyhhbWF6b25Vcmw6IHN0cmluZyk6IFByb21pc2U8Qm9va0luZm8+IHtcblx0XHQvLyBVUkzjga7jg5Djg6rjg4fjg7zjgrfjg6fjg7Ncblx0XHRpZiAoIWFtYXpvblVybC5pbmNsdWRlcygnYW1hem9uJykpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCBBbWF6b24gVVJMJyk7XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdC8vIEhUTUzjgrPjg7Pjg4bjg7Pjg4TjgpLlj5blvpdcblx0XHRcdGNvbnN0IGh0bWxDb250ZW50ID0gYXdhaXQgdGhpcy5mZXRjaEh0bWxDb250ZW50KGFtYXpvblVybCk7XG5cdFx0XHRcblx0XHRcdC8vIEhUTUzjgYvjgonjg6Hjgr/jg4fjg7zjgr/jgpLmir3lh7pcblx0XHRcdGNvbnN0IHRpdGxlTWF0Y2ggPSBodG1sQ29udGVudC5tYXRjaCgvPHNwYW4gaWQ9XCJwcm9kdWN0VGl0bGVcIltePl0qPihbXjxdKyk8XFwvc3Bhbj4vKTtcblx0XHRcdGNvbnN0IGF1dGhvck1hdGNoID0gaHRtbENvbnRlbnQubWF0Y2goLzxhIGNsYXNzPVwiW15cIl0qXCIgaHJlZj1cIlteXCJdKlxcL2VcXC9bXlwiXSpcIj4oW148XSspPFxcL2E+LykgfHwgXG5cdFx0XHRcdGh0bWxDb250ZW50Lm1hdGNoKC9pZD1cImJ5bGluZUluZm9cIltePl0qPltcXHNcXFNdKj88c3BhbltePl0qPihbXjxdKyk8XFwvc3Bhbj4vKTtcblx0XHRcdFxuXHRcdFx0Ly8g5ZWG5ZOB6Kqs5piO44KS5Y+W5b6XICjopIfmlbDjga7jg5Hjgr/jg7zjg7Pjgavlr77lv5zjgIHjgojjgoroqbPntLDjgarjgrPjg7Pjg4bjg7Pjg4TjgpLlj5blvpcpXG5cdFx0XHRjb25zdCBzdW1tYXJ5TWF0Y2ggPSBodG1sQ29udGVudC5tYXRjaCgvPGRpdiBpZD1cImJvb2tEZXNjcmlwdGlvbl9mZWF0dXJlX2RpdlwiW14+XSo+KFtcXHNcXFNdKj8pPFxcL2Rpdj4vKSB8fCBcblx0XHRcdFx0aHRtbENvbnRlbnQubWF0Y2goLzxkaXYgaWQ9XCJwcm9kdWN0RGVzY3JpcHRpb25cIltePl0qPihbXFxzXFxTXSo/KTxcXC9kaXY+LykgfHxcblx0XHRcdFx0aHRtbENvbnRlbnQubWF0Y2goLzxkaXYgY2xhc3M9XCJhLWV4cGFuZGVyLWNvbnRlbnRbXlwiXSpcIiBpZD1cIlteXCJdKkRlc2NyaXB0aW9uW15cIl0qXCJbXj5dKj4oW1xcc1xcU10qPyk8XFwvZGl2Pi8pIHx8XG5cdFx0XHRcdGh0bWxDb250ZW50Lm1hdGNoKC88bm9zY3JpcHQ+PGRpdj4oW1xcc1xcU10qPyk8XFwvZGl2PjxcXC9ub3NjcmlwdD4vKTtcblx0XHRcdFxuXHRcdFx0Ly8g44K444Oj44Oz44Or5oOF5aCx44Go44Oq44Oz44Kv44KS5Y+W5b6XXG5cdFx0XHRjb25zdCB7IGdlbnJlLCBnZW5yZVVybCB9ID0gdGhpcy5leHRyYWN0R2VucmVJbmZvKGh0bWxDb250ZW50LCBhbWF6b25VcmwpO1xuXHRcdFx0XG5cdFx0XHQvLyDjg4fjg7zjgr/jgpLmlbTlvaLjgZfjgabov5TjgZlcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHRpdGxlOiB0aXRsZU1hdGNoID8gdGl0bGVNYXRjaFsxXS50cmltKCkgOiAnVW5rbm93biBUaXRsZScsXG5cdFx0XHRcdGF1dGhvcjogYXV0aG9yTWF0Y2ggPyBhdXRob3JNYXRjaFsxXS50cmltKCkgOiAnVW5rbm93biBBdXRob3InLFxuXHRcdFx0XHRnZW5yZTogZ2VucmUsXG5cdFx0XHRcdGdlbnJlVXJsOiBnZW5yZVVybCxcblx0XHRcdFx0c3VtbWFyeTogc3VtbWFyeU1hdGNoID8gdGhpcy5jbGVhbkh0bWwoc3VtbWFyeU1hdGNoWzFdKS50cmltKCkgOiAnTm8gc3VtbWFyeSBhdmFpbGFibGUuJyxcblx0XHRcdFx0YW1hem9uVXJsOiBhbWF6b25Vcmxcblx0XHRcdH07XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGJvb2sgaW5mb3JtYXRpb246JywgZXJyb3IpO1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggYm9vayBpbmZvcm1hdGlvbi4gUGxlYXNlIGNoZWNrIHRoZSBVUkwgYW5kIHRyeSBhZ2Fpbi4nKTtcblx0XHR9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBIVE1M44Kz44Oz44OG44Oz44OE44GL44KJ44K444Oj44Oz44Or5oOF5aCx44KS5oq95Ye6XG5cdCAqL1xuXHRwcml2YXRlIGV4dHJhY3RHZW5yZUluZm8oaHRtbENvbnRlbnQ6IHN0cmluZywgYmFzZVVybDogc3RyaW5nKTogeyBnZW5yZTogc3RyaW5nLCBnZW5yZVVybDogc3RyaW5nIH0ge1xuXHRcdGxldCBnZW5yZSA9ICdGaWN0aW9uJzsgLy8g44OH44OV44Kp44Or44OI44Gu44K444Oj44Oz44OrXG5cdFx0bGV0IGdlbnJlVXJsID0gJyc7IC8vIOOCuOODo+ODs+ODq+OBrlVSTFxuXHRcdFxuXHRcdC8vIOODkeODs+OBj+OBmuODquOCueODiOOBi+OCieOCq+ODhuOCtOODqumajuWxpOOCkuWPluW+l1xuXHRcdGNvbnN0IGJyZWFkY3J1bWJzTWF0Y2ggPSBodG1sQ29udGVudC5tYXRjaCgvaWQ9XCJ3YXlmaW5kaW5nLWJyZWFkY3J1bWJzX2ZlYXR1cmVfZGl2XCJbXj5dKj4oW1xcc1xcU10qPyk8XFwvZGl2Pi8pO1xuXHRcdGlmIChicmVhZGNydW1ic01hdGNoKSB7XG5cdFx0XHRjb25zdCBicmVhZGNydW1icyA9IGJyZWFkY3J1bWJzTWF0Y2hbMV07XG5cdFx0XHQvLyDjg6rjg7Pjgq/jgpLlkKvjgoDjgZnjgbnjgabjga5h44K/44Kw44KS5oq95Ye6XG5cdFx0XHRjb25zdCBjYXRlZ29yeUxpbmtFbGVtZW50cyA9IGJyZWFkY3J1bWJzLm1hdGNoKC88YVtePl0qaHJlZj1cIihbXlwiXSopXCJbXj5dKj4oW148XSspPFxcL2E+L2cpO1xuXHRcdFx0XG5cdFx0XHRpZiAoY2F0ZWdvcnlMaW5rRWxlbWVudHMgJiYgY2F0ZWdvcnlMaW5rRWxlbWVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQvLyDmnIDlvozjga7jgqvjg4bjgrTjg6rjgpLkvb/nlKhcblx0XHRcdFx0Y29uc3QgbGFzdENhdGVnb3J5SW5kZXggPSBjYXRlZ29yeUxpbmtFbGVtZW50cy5sZW5ndGggLSAxO1xuXHRcdFx0XHRjb25zdCBsYXN0Q2F0ZWdvcnlFbGVtZW50ID0gY2F0ZWdvcnlMaW5rRWxlbWVudHNbbGFzdENhdGVnb3J5SW5kZXhdO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8g44Kr44OG44K044Oq5ZCN44KS5oq95Ye6XG5cdFx0XHRcdGNvbnN0IGNhdGVnb3J5VGV4dE1hdGNoID0gbGFzdENhdGVnb3J5RWxlbWVudC5tYXRjaCgvPihbXjxdKyk8Lyk7XG5cdFx0XHRcdGlmIChjYXRlZ29yeVRleHRNYXRjaCkge1xuXHRcdFx0XHRcdGdlbnJlID0gY2F0ZWdvcnlUZXh0TWF0Y2hbMV0udHJpbSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBVUkzjgpLmir3lh7pcblx0XHRcdFx0Y29uc3QgaHJlZk1hdGNoID0gbGFzdENhdGVnb3J5RWxlbWVudC5tYXRjaCgvaHJlZj1cIihbXlwiXSopXCIvKTtcblx0XHRcdFx0aWYgKGhyZWZNYXRjaCkge1xuXHRcdFx0XHRcdGdlbnJlVXJsID0gaHJlZk1hdGNoWzFdO1xuXHRcdFx0XHRcdGdlbnJlVXJsID0gdGhpcy5ub3JtYWxpemVVcmwoZ2VucmVVcmwsIGJhc2VVcmwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIOS7luOBruaWueazleOBp+OCguOCuOODo+ODs+ODq+aDheWgseOCkuaOouOBmVxuXHRcdGlmIChnZW5yZSA9PT0gJ0ZpY3Rpb24nIHx8IGdlbnJlID09PSAnS2luZGxlIFN0b3JlJykge1xuXHRcdFx0Y29uc3QgZ2VucmVNYXRjaCA9IGh0bWxDb250ZW50Lm1hdGNoKC88YSBjbGFzcz1cImEtbGluay1ub3JtYWwgYS1jb2xvci10ZXJ0aWFyeVwiW14+XSpocmVmPVwiKFteXCJdKilcIltePl0qPihbXjxdKyk8XFwvYT4vKTtcblx0XHRcdGlmIChnZW5yZU1hdGNoICYmIGdlbnJlTWF0Y2hbMl0gJiYgZ2VucmVNYXRjaFsyXS50cmltKCkgIT09ICdLaW5kbGUgU3RvcmUnKSB7XG5cdFx0XHRcdGdlbnJlID0gZ2VucmVNYXRjaFsyXS50cmltKCk7XG5cdFx0XHRcdGlmIChnZW5yZU1hdGNoWzFdKSB7XG5cdFx0XHRcdFx0Z2VucmVVcmwgPSBnZW5yZU1hdGNoWzFdO1xuXHRcdFx0XHRcdGdlbnJlVXJsID0gdGhpcy5ub3JtYWxpemVVcmwoZ2VucmVVcmwsIGJhc2VVcmwpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdHJldHVybiB7IGdlbnJlLCBnZW5yZVVybCB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICog55u45a++VVJM44KS57W25a++VVJM44Gr5aSJ5o+bXG5cdCAqL1xuXHRwcml2YXRlIG5vcm1hbGl6ZVVybCh1cmw6IHN0cmluZywgYmFzZVVybDogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRpZiAodXJsLnN0YXJ0c1dpdGgoJy8nKSkge1xuXHRcdFx0Y29uc3QgdXJsUGFydHMgPSBiYXNlVXJsLm1hdGNoKC9eKGh0dHBzPzpcXC9cXC9bXlxcL10rKVxcLy8pO1xuXHRcdFx0aWYgKHVybFBhcnRzKSB7XG5cdFx0XHRcdHJldHVybiB1cmxQYXJ0c1sxXSArIHVybDtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHVybDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIOOCv+OCpOODoOOCouOCpuODiOS7mOOBjeOBrmZldGNo44KS5a6f6KGMXG5cdCAqIEBwYXJhbSB1cmwg5Y+W5b6X44GZ44KLVVJMXG5cdCAqIEBwYXJhbSB0aW1lb3V0TXMg44K/44Kk44Og44Ki44Km44OI5pmC6ZaT77yI44Of44Oq56eS77yJXG5cdCAqIEByZXR1cm5zIFJlc3BvbnNlIOOCquODluOCuOOCp+OCr+ODiFxuXHQgKi9cblx0cHJpdmF0ZSBmZXRjaFdpdGhUaW1lb3V0KHVybDogc3RyaW5nLCB0aW1lb3V0TXMgPSAxMDAwMCk6IFByb21pc2U8UmVzcG9uc2U+IHtcblx0XHQvLyBBYm9ydENvbnRyb2xsZXLjgpLkvb/jgaPjgabjgr/jgqTjg6DjgqLjgqbjg4jjgpLlrp/oo4Vcblx0XHRjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXHRcdGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCB0aW1lb3V0TXMpO1xuXHRcdFxuXHRcdHJldHVybiBmZXRjaCh1cmwsIHsgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCB9KVxuXHRcdFx0LmZpbmFsbHkoKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICog44Oq44OI44Op44Kk5qmf6IO95LuY44GN44GuZmV0Y2hcblx0ICogQHBhcmFtIHVybCDlj5blvpfjgZnjgotVUkxcblx0ICogQHBhcmFtIG9wdGlvbnMgZmV0Y2jjgqrjg5fjgrfjg6fjg7Ncblx0ICogQHBhcmFtIHJldHJpZXMg44Oq44OI44Op44Kk5Zue5pWwXG5cdCAqIEBwYXJhbSB0aW1lb3V0TXMg44K/44Kk44Og44Ki44Km44OI5pmC6ZaT77yI44Of44Oq56eS77yJXG5cdCAqIEByZXR1cm5zIFJlc3BvbnNlIOOCquODluOCuOOCp+OCr+ODiFxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBmZXRjaFdpdGhSZXRyeSh1cmw6IHN0cmluZywgb3B0aW9ucyA9IHt9LCByZXRyaWVzID0gMywgdGltZW91dE1zID0gMTAwMDApOiBQcm9taXNlPFJlc3BvbnNlPiB7XG5cdFx0bGV0IGxhc3RFcnJvcjogRXJyb3IgfCBudWxsID0gbnVsbDtcblx0XHRcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHJldHJpZXM7IGkrKykge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Ly8g5oyH5pWw44OQ44OD44Kv44Kq44OV44Gn44Oq44OI44Op44Kk6ZaT6ZqU44KS5aKX44KE44GZ77yI5pyA5Yid44Gu44OI44Op44Kk44Gn44Gv44Km44Kn44Kk44OI44Gq44GX77yJXG5cdFx0XHRcdGlmIChpID4gMCkge1xuXHRcdFx0XHRcdGNvbnN0IHdhaXRUaW1lID0gTWF0aC5taW4oMTAwMCAqIE1hdGgucG93KDIsIGkgLSAxKSwgMTAwMDApO1xuXHRcdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCB3YWl0VGltZSkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRyZXR1cm4gYXdhaXQgdGhpcy5mZXRjaFdpdGhUaW1lb3V0KHVybCwgdGltZW91dE1zKTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGxhc3RFcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyb3IpKTtcblx0XHRcdFx0Y29uc29sZS5sb2coYEZldGNoIGF0dGVtcHQgJHtpICsgMX0gZmFpbGVkOiAke2xhc3RFcnJvci5tZXNzYWdlfWApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHR0aHJvdyBsYXN0RXJyb3IgfHwgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggYWZ0ZXIgbXVsdGlwbGUgcmV0cmllcycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVSTOOBi+OCiUhUTUzjgrPjg7Pjg4bjg7Pjg4TjgpLlj5blvpfvvIjopIfmlbDjga7jg5fjg63jgq3jgrfjgpLoqabjgZnvvIlcblx0ICovXG5cdHByaXZhdGUgYXN5bmMgZmV0Y2hIdG1sQ29udGVudCh1cmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0Ly8gQ09SU+OBruWVj+mhjOOCkuWbnumBv+OBmeOCi+OBn+OCgeOBq+ODl+ODreOCreOCt+OCteODvOODk+OCueOCkuS9v+eUqFxuXHRcdGNvbnN0IHByb3h5VXJscyA9IFtcblx0XHRcdGBodHRwczovL2FwaS5hbGxvcmlnaW5zLndpbi9nZXQ/dXJsPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHVybCl9YCxcblx0XHRcdGBodHRwczovL2NvcnNwcm94eS5pby8/JHtlbmNvZGVVUklDb21wb25lbnQodXJsKX1gLFxuXHRcdFx0YGh0dHBzOi8vY29ycy1hbnl3aGVyZS5oZXJva3VhcHAuY29tLyR7dXJsfWBcblx0XHRdO1xuXHRcdFxuXHRcdGxldCBodG1sQ29udGVudCA9ICcnO1xuXHRcdGxldCBwcm94eUVycm9yID0gJyc7XG5cdFx0XG5cdFx0Ly8g44OX44Ot44Kt44K344KS6aCG55Wq44Gr6Kmm44GZXG5cdFx0Zm9yIChjb25zdCBwcm94eVVybCBvZiBwcm94eVVybHMpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIOaUueiJr+eJiOOBrmZldGNo44KS5L2/55SoXG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaFdpdGhSZXRyeShwcm94eVVybCwge30sIDIsIDE1MDAwKTtcblx0XHRcdFx0XG5cdFx0XHRcdGlmICghcmVzcG9uc2Uub2spIHtcblx0XHRcdFx0XHRwcm94eUVycm9yID0gYEZhaWxlZCB0byBmZXRjaCBkYXRhOiAke3Jlc3BvbnNlLnN0YXR1c31gO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyDjg6zjgrnjg53jg7Pjgrnjgr/jgqTjg5fjgpLnorroqo1cblx0XHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoY29udGVudFR5cGUgJiYgY29udGVudFR5cGUuaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSkge1xuXHRcdFx0XHRcdC8vIEpTT07jg6zjgrnjg53jg7Pjgrnjga7loLTlkIhcblx0XHRcdFx0XHRjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cdFx0XHRcdFx0aWYgKHJlc3BvbnNlRGF0YS5jb250ZW50cykge1xuXHRcdFx0XHRcdFx0Ly8gYWxsb3JpZ2luc+W9ouW8j+OBruODrOOCueODneODs+OCuVxuXHRcdFx0XHRcdFx0aHRtbENvbnRlbnQgPSByZXNwb25zZURhdGEuY29udGVudHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIOODhuOCreOCueODiC9IVE1M44Os44K544Od44Oz44K544Gu5aC05ZCIXG5cdFx0XHRcdFx0aHRtbENvbnRlbnQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIOaIkOWKn+OBl+OBn+OCieODq+ODvOODl+OCkuaKnOOBkeOCi1xuXHRcdFx0XHRpZiAoaHRtbENvbnRlbnQpIGJyZWFrO1xuXHRcdFx0XHRcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRwcm94eUVycm9yID0gYFByb3h5IGVycm9yOiAke2VyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBTdHJpbmcoZXJyKX1gO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0aWYgKCFodG1sQ29udGVudCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggY29udGVudDogJHtwcm94eUVycm9yfWApO1xuXHRcdH1cblx0XHRcblx0XHRyZXR1cm4gaHRtbENvbnRlbnQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiDjg6HjgqTjg7PjgrPjg7Pjg4bjg7Pjg4TjgpLmir3lh7rjgZnjgovjg5jjg6vjg5Hjg7zjg6Hjgr3jg4Pjg4lcblx0ICovXG5cdHByaXZhdGUgZXh0cmFjdE1haW5Db250ZW50KGh0bWw6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Ly8g5LiA6Iis55qE44Gq44Kz44Oz44OG44Oz44OE44Kz44Oz44OG44OK44KS5o6i44GZXG5cdFx0Y29uc3QgY29udGVudE1hdGNoZXMgPSBbXG5cdFx0XHRodG1sLm1hdGNoKC88YXJ0aWNsZVtePl0qPihbXFxzXFxTXSo/KTxcXC9hcnRpY2xlPi8pLFxuXHRcdFx0aHRtbC5tYXRjaCgvPG1haW5bXj5dKj4oW1xcc1xcU10qPyk8XFwvbWFpbj4vKSxcblx0XHRcdGh0bWwubWF0Y2goLzxkaXZbXj5dKj9jbGFzcz1cIlteXCJdKj9jb250ZW50W15cIl0qP1wiW14+XSo+KFtcXHNcXFNdKj8pPFxcL2Rpdj4vaSksXG5cdFx0XHRodG1sLm1hdGNoKC88ZGl2W14+XSo/Y2xhc3M9XCJbXlwiXSo/ZW50cnlbXlwiXSo/XCJbXj5dKj4oW1xcc1xcU10qPyk8XFwvZGl2Pi9pKSxcblx0XHRcdGh0bWwubWF0Y2goLzxkaXZbXj5dKj9jbGFzcz1cIlteXCJdKj9wb3N0W15cIl0qP1wiW14+XSo+KFtcXHNcXFNdKj8pPFxcL2Rpdj4vaSlcblx0XHRdO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgbWF0Y2ggb2YgY29udGVudE1hdGNoZXMpIHtcblx0XHRcdGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuXHRcdFx0XHRyZXR1cm4gbWF0Y2hbMV07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIOODoeOCpOODs+OCs+ODs+ODhuODs+ODhOOBjOimi+OBpOOBi+OCieOBquOBhOWgtOWQiOOBr2JvZHnjgr/jgrDjga7kuK3ouqvjgpLov5TjgZlcblx0XHRjb25zdCBib2R5TWF0Y2ggPSBodG1sLm1hdGNoKC88Ym9keVtePl0qPihbXFxzXFxTXSo/KTxcXC9ib2R5Pi8pO1xuXHRcdHJldHVybiBib2R5TWF0Y2ggPyBib2R5TWF0Y2hbMV0gOiBodG1sO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQW50aHJvcGljIEFQSeOBp+imgee0hOOCkueUn+aIkOOBmeOCi+ODoeOCveODg+ODiVxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVN1bW1hcnlXaXRoQW50aHJvcGljKGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0Y29uc3QgYXBpS2V5ID0gdGhpcy5zZXR0aW5ncy5hbnRocm9waWNBcGlLZXk7XG5cdFx0aWYgKCFhcGlLZXkpIHtcblx0XHRcdC8vIEFQSeOCreODvOOBjOioreWumuOBleOCjOOBpuOBhOOBquOBhOWgtOWQiOOBr+mBqeWIh+OBquODoeODg+OCu+ODvOOCuOOCkui/lOOBmVxuXHRcdFx0cmV0dXJuICdObyBzdW1tYXJ5IGF2YWlsYWJsZS4gUGxlYXNlIHNldCBhbiBBbnRocm9waWMgQVBJIGtleSBpbiBzZXR0aW5ncyB0byBlbmFibGUgYXV0b21hdGljIHN1bW1hcml6YXRpb24uJztcblx0XHR9XG5cdFx0XG5cdFx0Y29uc3QgbWF4Q29udGVudExlbmd0aCA9IDEwMDAwOyAvLyDplbfjgZnjgY7jgovjgrPjg7Pjg4bjg7Pjg4Tjga/liIfjgoroqbDjgoHjgotcblx0XHRjb25zdCB0cnVuY2F0ZWRDb250ZW50ID0gY29udGVudC5sZW5ndGggPiBtYXhDb250ZW50TGVuZ3RoID8gXG5cdFx0XHRjb250ZW50LnN1YnN0cmluZygwLCBtYXhDb250ZW50TGVuZ3RoKSArICcuLi4nIDogY29udGVudDtcblx0XHRcblx0XHRjb25zdCBwcm9tcHQgPSBgXG5IZXJlJ3MgdGhlIGNvbnRlbnQgb2YgYSB0ZWNobmljYWwgYmxvZyBwb3N0LiBQbGVhc2Ugc3VtbWFyaXplIGl0IGluIGEgY29uY2lzZSB3YXksIGhpZ2hsaWdodGluZyB0aGUgbWFpbiBwb2ludHMsIGtleSB0ZWNobmljYWwgY29uY2VwdHMsIGFuZCBhbnkgaW1wb3J0YW50IGNvbmNsdXNpb25zOlxuXG4ke3RydW5jYXRlZENvbnRlbnR9XG5cblN1bW1hcnk6YDtcblx0XHRcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbS92MS9tZXNzYWdlcycsIHtcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuXHRcdFx0XHRcdCd4LWFwaS1rZXknOiBhcGlLZXksXG5cdFx0XHRcdFx0J2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0XHRtb2RlbDogdGhpcy5zZXR0aW5ncy5sbG1Nb2RlbCxcblx0XHRcdFx0XHRtYXhfdG9rZW5zOiAxMDAwLFxuXHRcdFx0XHRcdG1lc3NhZ2VzOiBbXG5cdFx0XHRcdFx0XHR7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH1cblx0XHRcdFx0XHRdXG5cdFx0XHRcdH0pXG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0aWYgKCFyZXNwb25zZS5vaykge1xuXHRcdFx0XHRjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihgQW50aHJvcGljIEFQSSBFcnJvcjogJHtlcnJvckRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgcmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblx0XHRcdHJldHVybiBkYXRhLmNvbnRlbnRbMF0udGV4dCB8fCAnTm8gc3VtbWFyeSBhdmFpbGFibGUuJztcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgY2FsbGluZyBBbnRocm9waWMgQVBJOicsIGVycm9yKTtcblx0XHRcdC8vIOOCqOODqeODvOODoeODg+OCu+ODvOOCuOOCkuODpuODvOOCtuODvOODleODrOODs+ODieODquODvOOBq+OBmeOCi1xuXHRcdFx0cmV0dXJuIGBVbmFibGUgdG8gZ2VuZXJhdGUgc3VtbWFyeTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9LiBDaGVjayB5b3VyIEFQSSBrZXkgYW5kIHRyeSBhZ2Fpbi5gO1xuXHRcdH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEhUTUzjgr/jgrDjgpLpmaTljrvjgZnjgovjg5jjg6vjg5Hjg7zjg6Hjgr3jg4Pjg4nvvIjmlLnooYzjgpLntq3mjIHvvIlcblx0ICovXG5cdHByaXZhdGUgY2xlYW5IdG1sKGh0bWw6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Ly8gPGJyPuOChDwvcD7jgr/jgrDjgpLmlLnooYzjgavnva7mj5vjgZfjgabjgYvjgonku5bjga5IVE1M44K/44Kw44KS5YmK6ZmkXG5cdFx0cmV0dXJuIGh0bWxcblx0XHRcdC5yZXBsYWNlKC88YnJbXj5dKj4vZ2ksICdcXG4nKVxuXHRcdFx0LnJlcGxhY2UoLzxcXC9wPi9naSwgJ1xcblxcbicpXG5cdFx0XHQucmVwbGFjZSgvPFtePl0qPi9nLCAnICcpXG5cdFx0XHQucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpXG5cdFx0XHQudHJpbSgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogT2JzaWRpYW7jga7jgr/jgrDjgoTjg6rjg7Pjgq/jgavlubLmuInjgZnjgovmloflrZfjgpLpmaTljrvjgZfjgIFNYXJrZG93buODquODs+OCr+OCkuS9nOaIkFxuXHQgKi9cblx0cHJpdmF0ZSBjcmVhdGVNYXJrZG93bkxpbmsodGl0bGU6IHN0cmluZywgdXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdC8vIE9ic2lkaWFu44Gu44K/44Kw44KE44Oq44Oz44Kv44Gr5L2/44KP44KM44KL54m55q6K5paH5a2X44KS6Zmk5Y67XG5cdFx0Y29uc3QgY2xlYW5UaXRsZSA9IHRpdGxlLnJlcGxhY2UoL1sjXFxbXFxdfF0vZywgJycpLnRyaW0oKTtcblx0XHQvLyBNYXJrZG93buW9ouW8j+OBruODquODs+OCr+OCkuS9nOaIkFxuXHRcdHJldHVybiBgWyR7Y2xlYW5UaXRsZX1dKCR7dXJsfSlgO1xuXHR9XG5cdFxuXHQvKipcblx0ICog44Kr44O844K944Or5L2N572u44GuVVJM44KS5Y+W5b6X44GZ44KL44OY44Or44OR44O844Oh44K944OD44OJXG5cdCAqL1xuXHRwcml2YXRlIGdldFVybFVuZGVyQ3Vyc29yKGVkaXRvcjogRWRpdG9yKTogc3RyaW5nIHwgbnVsbCB7XG5cdFx0Y29uc3QgY3Vyc29yUG9zID0gZWRpdG9yLmdldEN1cnNvcigpO1xuXHRcdGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3JQb3MubGluZSk7XG5cdFx0XG5cdFx0Ly8g54++5Zyo44Gu6KGM44GnVVJM44KS5qSc57SiXG5cdFx0bGV0IG1hdGNoO1xuXHRcdHdoaWxlICgobWF0Y2ggPSBVUkxfUEFUVEVSTi5leGVjKGxpbmUpKSAhPT0gbnVsbCkge1xuXHRcdFx0Y29uc3Qgc3RhcnQgPSBtYXRjaC5pbmRleDtcblx0XHRcdGNvbnN0IGVuZCA9IHN0YXJ0ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuXHRcdFx0XG5cdFx0XHQvLyDjgqvjg7zjgr3jg6vjgYxVUkzjga7nr4Tlm7LlhoXjgavjgYLjgovloLTlkIhcblx0XHRcdGlmIChjdXJzb3JQb3MuY2ggPj0gc3RhcnQgJiYgY3Vyc29yUG9zLmNoIDw9IGVuZCkge1xuXHRcdFx0XHRyZXR1cm4gbWF0Y2hbMF07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdC8vIOato+imj+ihqOePvuOBruOCpOODs+ODh+ODg+OCr+OCueOCkuODquOCu+ODg+ODiFxuXHRcdFVSTF9QQVRURVJOLmxhc3RJbmRleCA9IDA7XG5cdFx0XG5cdFx0Ly8g44Kr44O844K944Or44Gu55u05YmN44G+44Gf44Gv55u05b6M44GuVVJM44KC5qSc57SiXG5cdFx0Y29uc3QgbWF0Y2hlcyA9IGxpbmUubWF0Y2goVVJMX1BBVFRFUk4pO1xuXHRcdGlmIChtYXRjaGVzKSB7XG5cdFx0XHQvLyDmnIDjgoLov5HjgYRVUkzjgpLmjqLjgZlcblx0XHRcdGxldCBjbG9zZXN0VXJsID0gbnVsbDtcblx0XHRcdGxldCBtaW5EaXN0YW5jZSA9IE51bWJlci5NQVhfVkFMVUU7XG5cdFx0XHRcblx0XHRcdGZvciAoY29uc3QgdXJsIG9mIG1hdGNoZXMpIHtcblx0XHRcdFx0Y29uc3Qgc3RhcnQgPSBsaW5lLmluZGV4T2YodXJsKTtcblx0XHRcdFx0Y29uc3QgZW5kID0gc3RhcnQgKyB1cmwubGVuZ3RoO1xuXHRcdFx0XHRjb25zdCBkaXN0YW5jZVRvU3RhcnQgPSBNYXRoLmFicyhjdXJzb3JQb3MuY2ggLSBzdGFydCk7XG5cdFx0XHRcdGNvbnN0IGRpc3RhbmNlVG9FbmQgPSBNYXRoLmFicyhjdXJzb3JQb3MuY2ggLSBlbmQpO1xuXHRcdFx0XHRjb25zdCBtaW5EaXN0ID0gTWF0aC5taW4oZGlzdGFuY2VUb1N0YXJ0LCBkaXN0YW5jZVRvRW5kKTtcblx0XHRcdFx0XG5cdFx0XHRcdGlmIChtaW5EaXN0IDwgbWluRGlzdGFuY2UpIHtcblx0XHRcdFx0XHRtaW5EaXN0YW5jZSA9IG1pbkRpc3Q7XG5cdFx0XHRcdFx0Y2xvc2VzdFVybCA9IHVybDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyDjgqvjg7zjgr3jg6vjgYvjgokxMOaWh+Wtl+S7peWGheOBq1VSTOOBjOOBguOCi+WgtOWQiOOBr+WPluW+l1xuXHRcdFx0aWYgKG1pbkRpc3RhbmNlIDw9IDEwKSB7XG5cdFx0XHRcdHJldHVybiBjbG9zZXN0VXJsO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4vKipcbiAqIFVSTOWFpeWKm+ODouODvOODgOODq+OBruWfuuacrOOCpOODs+OCv+ODvOODleOCp+ODvOOCuVxuICovXG5pbnRlcmZhY2UgVXJsTW9kYWwge1xuXHR1cmw6IHN0cmluZztcblx0c3RhcnRQcm9jZXNzaW5nKCk6IFByb21pc2U8dm9pZD47XG5cdG9wZW4oKTogdm9pZDtcblx0Y2xvc2UoKTogdm9pZDtcbn1cblxuLyoqXG4gKiDmm7jnsY1VUkzlhaXlipvnlKjjga7jg6Ljg7zjg4Djg6tcbiAqL1xuY2xhc3MgQm9va1VybE1vZGFsIGV4dGVuZHMgTW9kYWwgaW1wbGVtZW50cyBVcmxNb2RhbCB7XG5cdHBsdWdpbjogQm9va0NhcmRDcmVhdG9yO1xuXHR1cmw6IHN0cmluZyA9ICcnO1xuXHRsb2FkaW5nQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcblx0YnV0dG9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcblx0dXJsSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogQm9va0NhcmRDcmVhdG9yKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRW50ZXIgQW1hem9uIEJvb2sgVVJMJyB9KTtcblxuXHRcdC8vIFVSTOWFpeWKm+ODleOCo+ODvOODq+ODiVxuXHRcdGNvbnN0IHVybElucHV0Q29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuXHRcdHRoaXMudXJsSW5wdXQgPSB1cmxJbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG5cdFx0XHRhdHRyOiB7XG5cdFx0XHRcdHR5cGU6ICd0ZXh0Jyxcblx0XHRcdFx0cGxhY2Vob2xkZXI6ICdodHRwczovL3d3dy5hbWF6b24uY29tLy4uLidcblx0XHRcdH0sXG5cdFx0XHRjbHM6ICdib29rLXVybC1pbnB1dCdcblx0XHR9KTtcblx0XHR0aGlzLnVybElucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXHRcdHRoaXMudXJsSW5wdXQuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG5cdFx0dGhpcy51cmxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG5cdFx0XHR0aGlzLnVybCA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcblx0XHR9KTtcblx0XHQvLyDkuovliY3jgavoqK3lrprjgZXjgozjgZ9VUkzjgYzjgYLjgovloLTlkIjjga/ooajnpLpcblx0XHRpZiAodGhpcy51cmwpIHtcblx0XHRcdHRoaXMudXJsSW5wdXQudmFsdWUgPSB0aGlzLnVybDtcblx0XHR9XG5cblx0XHQvLyDjg63jg7zjg4fjgqPjg7PjgrDjgqTjg7PjgrjjgrHjg7zjgr/vvIjmnIDliJ3jga/pnZ7ooajnpLrvvIlcblx0XHR0aGlzLmxvYWRpbmdDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbG9hZGluZy1jb250YWluZXInIH0pO1xuXHRcdHRoaXMubG9hZGluZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdGNvbnN0IHNwaW5uZXIgPSB0aGlzLmxvYWRpbmdDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbG9hZGluZy1zcGlubmVyJyB9KTtcblx0XHR0aGlzLmxvYWRpbmdDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbG9hZGluZy10ZXh0JywgdGV4dDogJ0ZldGNoaW5nIGJvb2sgaW5mb3JtYXRpb24uLi4nIH0pO1xuXG5cdFx0Ly8g44Oc44K/44Oz44Kz44Oz44OG44OKXG5cdFx0dGhpcy5idXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG5cdFx0dGhpcy5idXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHR0aGlzLmJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG5cdFx0dGhpcy5idXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzAuNWVtJztcblxuXHRcdC8vIOOCreODo+ODs+OCu+ODq+ODnOOCv+ODs1xuXHRcdGNvbnN0IGNhbmNlbEJ1dHRvbiA9IHRoaXMuYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuXHRcdGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cblx0XHQvLyDkvZzmiJDjg5zjgr/jg7Ncblx0XHRjb25zdCBjcmVhdGVCdXR0b24gPSB0aGlzLmJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ3JlYXRlJywgY2xzOiAnbW9kLWN0YScgfSk7XG5cdFx0Y3JlYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0dGhpcy5zdGFydFByb2Nlc3NpbmcoKTtcblx0XHR9KTtcblxuXHRcdC8vIOWFpeWKm+ODleOCo+ODvOODq+ODieOBq+ODleOCqeODvOOCq+OCuVxuXHRcdHRoaXMudXJsSW5wdXQuZm9jdXMoKTtcblx0fVxuXG5cdC8vIFVSTOOBi+OCieOCq+ODvOODieS9nOaIkOWHpueQhuOCkumWi+Wni1xuXHRhc3luYyBzdGFydFByb2Nlc3NpbmcoKSB7XG5cdFx0aWYgKCF0aGlzLnVybCkge1xuXHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgdmFsaWQgQW1hem9uIFVSTCcpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHQvLyDjg63jg7zjg4fjgqPjg7PjgrDjgqTjg7PjgrjjgrHjg7zjgr/jgpLooajnpLrjgZfjgIHjg5zjgr/jg7PjgpLpnZ7ooajnpLpcblx0XHRcdHRoaXMubG9hZGluZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdFx0dGhpcy5idXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdFxuXHRcdFx0Ly8gTm90aWNl6KGo56S644KC5L2155SoXG5cdFx0XHRuZXcgTm90aWNlKCdGZXRjaGluZyBib29rIGluZm9ybWF0aW9uLi4uJyk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IGJvb2tJbmZvID0gYXdhaXQgdGhpcy5wbHVnaW4uZmV0Y2hCb29rSW5mbyh0aGlzLnVybCk7XG5cdFx0XHRcblx0XHRcdC8vIOeUn+aIkOS4reOBruODoeODg+OCu+ODvOOCuOOBq+abtOaWsFxuXHRcdFx0Y29uc3QgbG9hZGluZ1RleHQgPSB0aGlzLmxvYWRpbmdDb250YWluZXIucXVlcnlTZWxlY3RvcignLmxvYWRpbmctdGV4dCcpIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKGxvYWRpbmdUZXh0KSB7XG5cdFx0XHRcdGxvYWRpbmdUZXh0LmlubmVyVGV4dCA9ICdDcmVhdGluZyBib29rIGNhcmQuLi4nO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5jcmVhdGVOb3RlRnJvbVRlbXBsYXRlKGJvb2tJbmZvKTtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Ly8g44Ko44Op44O85pmC44Gv44Ot44O844OH44Kj44Oz44Kw44KS6Z2e6KGo56S644Gr44GX44Gm44Oc44K/44Oz44KS5YaN6KGo56S6XG5cdFx0XHR0aGlzLmxvYWRpbmdDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdHRoaXMuYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XG5cdFx0fVxuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4vKipcbiAqIOioreWumuOCv+ODluOBruWun+ijhVxuICovXG5jbGFzcyBCb29rQ2FyZENyZWF0b3JTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogQm9va0NhcmRDcmVhdG9yO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEJvb2tDYXJkQ3JlYXRvcikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXHRcdFxuXHRcdC8vIOODl+ODqeOCsOOCpOODs+WbuuacieOBruOCr+ODqeOCueOCkui/veWKoFxuXHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKCdib29rLWNhcmQtY3JlYXRvcicpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQm9vayBDYXJkIENyZWF0b3IgU2V0dGluZ3MnIH0pO1xuXG5cdFx0Ly8g44K744Kv44K344On44Oz44KS5piO56K644Gr5YiG44GR44Gm6KGo56S6XG5cdFx0dGhpcy5yZW5kZXJBbWF6b25Cb29rU2VjdGlvbihjb250YWluZXJFbCk7XG5cdFx0dGhpcy5yZW5kZXJUZWNoQmxvZ1NlY3Rpb24oY29udGFpbmVyRWwpO1xuXHRcdHRoaXMucmVuZGVyQXBpU2VjdGlvbihjb250YWluZXJFbCk7XG5cdFx0dGhpcy5yZW5kZXJUZW1wbGF0ZVZhcmlhYmxlcyhjb250YWluZXJFbCk7XG5cdH1cblxuXHQvLyBBbWF6b24gQm9vayBDYXJkc+OBruioreWumuOCu+OCr+OCt+ODp+ODs1xuXHRwcml2YXRlIHJlbmRlckFtYXpvbkJvb2tTZWN0aW9uKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGFtYXpvblNlY3Rpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmdzLXNlY3Rpb24nKTtcblx0XHRhbWF6b25TZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FtYXpvbiBCb29rIENhcmRzIFNldHRpbmdzJyB9KTtcblxuXHRcdC8vIOabuOexjeeUqOODhuODs+ODl+ODrOODvOODiOODleOCoeOCpOODq+OBruioreWumlxuXHRcdG5ldyBTZXR0aW5nKGFtYXpvblNlY3Rpb24pXG5cdFx0XHQuc2V0TmFtZSgnQm9vayB0ZW1wbGF0ZSBmaWxlJylcblx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIHRlbXBsYXRlIGZpbGUgZm9yIEFtYXpvbiBib29rIGNhcmRzJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0V4YW1wbGU6IHRlbXBsYXRlcy9ib29rLXRlbXBsYXRlLm1kJylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tUZW1wbGF0ZVBhdGgpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rVGVtcGxhdGVQYXRoID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cblx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ0Jyb3dzZScpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHQvLyDml6LlrZjjga7jg5XjgqHjgqTjg6vjgpLpgbjmip7jgZnjgovjgZ/jgoHjga7mlrDjgZfjgYTjg6Ljg7zjg4Djg6vjgpLkvZzmiJBcblx0XHRcdFx0XHRuZXcgRmlsZVNlbGVjdG9yTW9kYWwodGhpcy5hcHAsIChmaWxlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rVGVtcGxhdGVQYXRoID0gZmlsZS5wYXRoO1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8g6Kit5a6a55S76Z2i44KS5pu05pawXG5cdFx0XHRcdFx0fSkub3BlbigpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdC8vIOabuOexjeeUqOWHuuWKm+ODleOCqeODq+ODgOOBruioreWumlxuXHRcdG5ldyBTZXR0aW5nKGFtYXpvblNlY3Rpb24pXG5cdFx0XHQuc2V0TmFtZSgnQm9vayBvdXRwdXQgZm9sZGVyJylcblx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGZvbGRlciB3aGVyZSBBbWF6b24gYm9vayBjYXJkcyB3aWxsIGJlIGNyZWF0ZWQnKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRXhhbXBsZTogQm9va3MnKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va091dHB1dEZvbGRlcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tPdXRwdXRGb2xkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuXHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnQnJvd3NlJylcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdC8vIOODleOCqeODq+ODgOOCkumBuOaKnuOBmeOCi+OBn+OCgeOBruaWsOOBl+OBhOODouODvOODgOODq+OCkuS9nOaIkFxuXHRcdFx0XHRcdG5ldyBGb2xkZXJTZWxlY3Rvck1vZGFsKHRoaXMuYXBwLCAoZm9sZGVyKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rT3V0cHV0Rm9sZGVyID0gZm9sZGVyLnBhdGg7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyDoqK3lrprnlLvpnaLjgpLmm7TmlrBcblx0XHRcdFx0XHR9KS5vcGVuKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHR9XG5cblx0Ly8gVGVjaCBCbG9nIENhcmRz44Gu6Kit5a6a44K744Kv44K344On44OzXG5cdHByaXZhdGUgcmVuZGVyVGVjaEJsb2dTZWN0aW9uKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGJsb2dTZWN0aW9uID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdzZXR0aW5ncy1zZWN0aW9uJyk7XG5cdFx0YmxvZ1NlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVGVjaCBCbG9nIENhcmRzIFNldHRpbmdzJyB9KTtcblxuXHRcdC8vIOODluODreOCsOeUqOODhuODs+ODl+ODrOODvOODiOODleOCoeOCpOODq+OBruioreWumlxuXHRcdG5ldyBTZXR0aW5nKGJsb2dTZWN0aW9uKVxuXHRcdFx0LnNldE5hbWUoJ0Jsb2cgdGVtcGxhdGUgZmlsZScpXG5cdFx0XHQuc2V0RGVzYygnU2VsZWN0IHRoZSB0ZW1wbGF0ZSBmaWxlIGZvciB0ZWNoIGJsb2cgY2FyZHMnKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRXhhbXBsZTogdGVtcGxhdGVzL2Jsb2ctdGVtcGxhdGUubWQnKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYmxvZ1RlbXBsYXRlUGF0aClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJsb2dUZW1wbGF0ZVBhdGggPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuXHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnQnJvd3NlJylcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdC8vIOaXouWtmOOBruODleOCoeOCpOODq+OCkumBuOaKnuOBmeOCi+OBn+OCgeOBruaWsOOBl+OBhOODouODvOODgOODq+OCkuS9nOaIkFxuXHRcdFx0XHRcdG5ldyBGaWxlU2VsZWN0b3JNb2RhbCh0aGlzLmFwcCwgKGZpbGUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJsb2dUZW1wbGF0ZVBhdGggPSBmaWxlLnBhdGg7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyDoqK3lrprnlLvpnaLjgpLmm7TmlrBcblx0XHRcdFx0XHR9KS5vcGVuKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0Ly8g44OW44Ot44Kw55So5Ye65Yqb44OV44Kp44Or44OA44Gu6Kit5a6aXG5cdFx0bmV3IFNldHRpbmcoYmxvZ1NlY3Rpb24pXG5cdFx0XHQuc2V0TmFtZSgnQmxvZyBvdXRwdXQgZm9sZGVyJylcblx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGZvbGRlciB3aGVyZSB0ZWNoIGJsb2cgY2FyZHMgd2lsbCBiZSBjcmVhdGVkJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0V4YW1wbGU6IFRlY2hCbG9ncycpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ibG9nT3V0cHV0Rm9sZGVyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmxvZ091dHB1dEZvbGRlciA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG5cdFx0XHRcdC5zZXRCdXR0b25UZXh0KCdCcm93c2UnKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0Ly8g44OV44Kp44Or44OA44KS6YG45oqe44GZ44KL44Gf44KB44Gu5paw44GX44GE44Oi44O844OA44Or44KS5L2c5oiQXG5cdFx0XHRcdFx0bmV3IEZvbGRlclNlbGVjdG9yTW9kYWwodGhpcy5hcHAsIChmb2xkZXIpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJsb2dPdXRwdXRGb2xkZXIgPSBmb2xkZXIucGF0aDtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7IC8vIOioreWumueUu+mdouOCkuabtOaWsFxuXHRcdFx0XHRcdH0pLm9wZW4oKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cblxuXHQvLyBBUEnoqK3lrprjgrvjgq/jgrfjg6fjg7Ncblx0cHJpdmF0ZSByZW5kZXJBcGlTZWN0aW9uKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGFwaVNlY3Rpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmdzLXNlY3Rpb24nKTtcblx0XHRhcGlTZWN0aW9uLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FQSSBTZXR0aW5ncyBmb3IgQmxvZyBTdW1tYXJpemF0aW9uJyB9KTtcblxuXHRcdC8vIEFudGhyb3BpYyBBUEkgS2V544Gu6Kit5a6aXG5cdFx0bmV3IFNldHRpbmcoYXBpU2VjdGlvbilcblx0XHRcdC5zZXROYW1lKCdBbnRocm9waWMgQVBJIEtleScpXG5cdFx0XHQuc2V0RGVzYygnRW50ZXIgeW91ciBBbnRocm9waWMgQVBJIGtleSBmb3IgdGVjaCBibG9nIHN1bW1hcnkgZ2VuZXJhdGlvbicpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdzay1hbnQtLi4uJylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSlcblx0XHRcdFx0LnNldERpc2FibGVkKGZhbHNlKVxuXHRcdFx0XHQuaW5wdXRFbC50eXBlID0gJ3Bhc3N3b3JkJ1xuXHRcdFx0KVxuXHRcdFx0LmFkZEV4dHJhQnV0dG9uKGJ0biA9PiBidG5cblx0XHRcdFx0LnNldEljb24oJ3Jlc2V0Jylcblx0XHRcdFx0LnNldFRvb2x0aXAoJ1NhdmUgQVBJIEtleScpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBpbnB1dEVsID0gYXBpU2VjdGlvbi5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSA9IGlucHV0RWwudmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0bmV3IE5vdGljZSgnQVBJIEtleSBzYXZlZCcpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0XHRcdFxuXHRcdC8vIExMTeODouODh+ODq+OBrumBuOaKnlxuXHRcdG5ldyBTZXR0aW5nKGFwaVNlY3Rpb24pXG5cdFx0XHQuc2V0TmFtZSgnQ2xhdWRlIE1vZGVsJylcblx0XHRcdC5zZXREZXNjKCdTZWxlY3Qgd2hpY2ggQ2xhdWRlIG1vZGVsIHRvIHVzZSBmb3IgYmxvZyBzdW1tYXJpemF0aW9uJylcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuXHRcdFx0XHQuYWRkT3B0aW9uKCdjbGF1ZGUtMy1oYWlrdS0yMDI0MDMwNycsICdDbGF1ZGUgMyBIYWlrdSAoRmFzdCknKVxuXHRcdFx0XHQuYWRkT3B0aW9uKCdjbGF1ZGUtMy1zb25uZXQtMjAyNDAyMjknLCAnQ2xhdWRlIDMgU29ubmV0IChCYWxhbmNlZCknKVxuXHRcdFx0XHQuYWRkT3B0aW9uKCdjbGF1ZGUtMy1vcHVzLTIwMjQwMjI5JywgJ0NsYXVkZSAzIE9wdXMgKFBvd2VyZnVsKScpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sbG1Nb2RlbClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbU1vZGVsID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHR9XG5cblx0Ly8g44OG44Oz44OX44Os44O844OI5aSJ5pWw44Gu6Kqs5piO44K744Kv44K344On44OzXG5cdHByaXZhdGUgcmVuZGVyVGVtcGxhdGVWYXJpYWJsZXMoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cdFx0Y29uc3QgdmFyaWFibGVzU2VjdGlvbiA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignc2V0dGluZ3Mtc2VjdGlvbicpO1xuXHRcdHZhcmlhYmxlc1NlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVGVtcGxhdGUgVmFyaWFibGVzJyB9KTtcblx0XHRcblx0XHRjb25zdCB0ZW1wbGF0ZUluZm8gPSB2YXJpYWJsZXNTZWN0aW9uLmNyZWF0ZUVsKCdkaXYnKTtcblx0XHR0ZW1wbGF0ZUluZm8uaW5uZXJIVE1MID0gYFxuXHRcdFx0PHA+WW91IGNhbiB1c2UgdGhlIGZvbGxvd2luZyB2YXJpYWJsZXMgaW4geW91ciB0ZW1wbGF0ZXM6PC9wPlxuXHRcdFx0PGg0PkZvciBBbWF6b24gQm9vayB0ZW1wbGF0ZXM6PC9oND5cblx0XHRcdDx1bD5cblx0XHRcdFx0PGxpPjxjb2RlPnt7Ym9vay1jcmVhdG9yOnRpdGxlfX08L2NvZGU+IC0gQm9vayB0aXRsZTwvbGk+XG5cdFx0XHRcdDxsaT48Y29kZT57e2Jvb2stY3JlYXRvcjphdXRob3J9fTwvY29kZT4gLSBCb29rIGF1dGhvcjwvbGk+XG5cdFx0XHRcdDxsaT48Y29kZT57e2Jvb2stY3JlYXRvcjpnZW5yZX19PC9jb2RlPiAtIEJvb2sgZ2VucmU8L2xpPlxuXHRcdFx0XHQ8bGk+PGNvZGU+e3tib29rLWNyZWF0b3I6Z2VucmUtbGlua319PC9jb2RlPiAtIE1hcmtkb3duIGxpbmsgdG8gZ2VucmUgcGFnZTwvbGk+XG5cdFx0XHRcdDxsaT48Y29kZT57e2Jvb2stY3JlYXRvcjpzdW1tYXJ5fX08L2NvZGU+IC0gQm9vayBzdW1tYXJ5PC9saT5cblx0XHRcdFx0PGxpPjxjb2RlPnt7Ym9vay1jcmVhdG9yOmFtYXpvbi1saW5rfX08L2NvZGU+IC0gTWFya2Rvd24gbGluayB0byBBbWF6b24gcGFnZTwvbGk+XG5cdFx0XHQ8L3VsPlxuXHRcdFx0PGg0PkZvciBUZWNoIEJsb2cgdGVtcGxhdGVzOjwvaDQ+XG5cdFx0XHQ8dWw+XG5cdFx0XHRcdDxsaT48Y29kZT57e2Jsb2ctY3JlYXRvcjp0aXRsZX19PC9jb2RlPiAtIEJsb2cgdGl0bGU8L2xpPlxuXHRcdFx0XHQ8bGk+PGNvZGU+e3tibG9nLWNyZWF0b3I6c3VtbWFyeX19PC9jb2RlPiAtIEJsb2cgc3VtbWFyeTwvbGk+XG5cdFx0XHRcdDxsaT48Y29kZT57e2Jsb2ctY3JlYXRvcjpibG9nLWxpbmt9fTwvY29kZT4gLSBNYXJrZG93biBsaW5rIHRvIGJsb2cgcGFnZTwvbGk+XG5cdFx0XHQ8L3VsPlxuXHRcdGA7XG5cdH1cbn1cblxuLy8g44OV44Kh44Kk44Or6YG45oqe55So44Gu44Oi44O844OA44OrXG5jbGFzcyBGaWxlU2VsZWN0b3JNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0b25TZWxlY3Q6IChmaWxlOiBURmlsZSkgPT4gdm9pZDtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25TZWxlY3Q6IChmaWxlOiBURmlsZSkgPT4gdm9pZCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdTZWxlY3QgVGVtcGxhdGUgRmlsZScgfSk7XG5cblx0XHRjb25zdCBmaWxlTGlzdCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHRmaWxlTGlzdC5zdHlsZS5tYXhIZWlnaHQgPSAnNDAwcHgnO1xuXHRcdGZpbGVMaXN0LnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nO1xuXG5cdFx0Ly8g44Oe44O844Kv44OA44Km44Oz44OV44Kh44Kk44Or44Gu5LiA6Kan44KS6KGo56S6XG5cdFx0dGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZvckVhY2goZmlsZSA9PiB7XG5cdFx0XHRjb25zdCBmaWxlSXRlbSA9IGZpbGVMaXN0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2ZpbGUtaXRlbScgfSk7XG5cdFx0XHRmaWxlSXRlbS5zdHlsZS5wYWRkaW5nID0gJzVweCc7XG5cdFx0XHRmaWxlSXRlbS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG5cdFx0XHRmaWxlSXRlbS5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG5cdFx0XHRmaWxlSXRlbS5pbm5lckhUTUwgPSBgPHNwYW4+JHtmaWxlLnBhdGh9PC9zcGFuPmA7XG5cdFx0XHRcblx0XHRcdGZpbGVJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm9uU2VsZWN0KGZpbGUpO1xuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0ZmlsZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcblx0XHRcdFx0ZmlsZUl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpJztcblx0XHRcdH0pO1xuXG5cdFx0XHRmaWxlSXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuXHRcdFx0XHRmaWxlSXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJztcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4vKipcbiAqIOODluODreOCsFVSTOWFpeWKm+eUqOOBruODouODvOODgOODq1xuICovXG5jbGFzcyBUZWNoQmxvZ1VybE1vZGFsIGV4dGVuZHMgTW9kYWwgaW1wbGVtZW50cyBVcmxNb2RhbCB7XG5cdHBsdWdpbjogQm9va0NhcmRDcmVhdG9yO1xuXHR1cmw6IHN0cmluZyA9ICcnO1xuXHRsb2FkaW5nQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcblx0YnV0dG9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcblx0dXJsSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogQm9va0NhcmRDcmVhdG9yKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRW50ZXIgVGVjaCBCbG9nIFVSTCcgfSk7XG5cblx0XHQvLyBVUkzlhaXlipvjg5XjgqPjg7zjg6vjg4lcblx0XHRjb25zdCB1cmxJbnB1dENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHR0aGlzLnVybElucHV0ID0gdXJsSW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuXHRcdFx0YXR0cjoge1xuXHRcdFx0XHR0eXBlOiAndGV4dCcsXG5cdFx0XHRcdHBsYWNlaG9sZGVyOiAnaHR0cHM6Ly9ibG9nLmV4YW1wbGUuY29tLy4uLidcblx0XHRcdH0sXG5cdFx0XHRjbHM6ICdibG9nLXVybC1pbnB1dCdcblx0XHR9KTtcblx0XHR0aGlzLnVybElucHV0LnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXHRcdHRoaXMudXJsSW5wdXQuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG5cdFx0dGhpcy51cmxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChlKSA9PiB7XG5cdFx0XHR0aGlzLnVybCA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcblx0XHR9KTtcblx0XHQvLyDkuovliY3jgavoqK3lrprjgZXjgozjgZ9VUkzjgYzjgYLjgovloLTlkIjjga/ooajnpLpcblx0XHRpZiAodGhpcy51cmwpIHtcblx0XHRcdHRoaXMudXJsSW5wdXQudmFsdWUgPSB0aGlzLnVybDtcblx0XHR9XG5cblx0XHQvLyBBUEnjgq3jg7zjga7orablkYrvvIjoqK3lrprjgZXjgozjgabjgYTjgarjgYTloLTlkIjvvIlcblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY0FwaUtleSkge1xuXHRcdFx0Y29uc3Qgd2FybmluZ0RpdiA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHRcdHdhcm5pbmdEaXYuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1lcnJvciknO1xuXHRcdFx0d2FybmluZ0Rpdi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMWVtJztcblx0XHRcdHdhcm5pbmdEaXYuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdXYXJuaW5nOiBBbnRocm9waWMgQVBJIEtleSBpcyBub3Qgc2V0LiBMTE0gc3VtbWFyeSB3aWxsIG5vdCBiZSBhdmFpbGFibGUuJyB9KTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8g6YG45oqe44GV44KM44Gm44GE44KL44Oi44OH44Or44Gu5oOF5aCx44KS6KGo56S6XG5cdFx0Y29uc3QgbW9kZWxJbmZvID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuXHRcdG1vZGVsSW5mby5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMWVtJztcblx0XHRsZXQgbW9kZWxOYW1lID0gdGhpcy5nZXRNb2RlbERpc3BsYXlOYW1lKHRoaXMucGx1Z2luLnNldHRpbmdzLmxsbU1vZGVsKTtcblx0XHRtb2RlbEluZm8uY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBTZWxlY3RlZCBtb2RlbDogJHttb2RlbE5hbWV9YCB9KTtcblxuXHRcdC8vIOODreODvOODh+OCo+ODs+OCsOOCpOODs+OCuOOCseODvOOCv++8iOacgOWIneOBr+mdnuihqOekuu+8iVxuXHRcdHRoaXMubG9hZGluZ0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdsb2FkaW5nLWNvbnRhaW5lcicgfSk7XG5cdFx0dGhpcy5sb2FkaW5nQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0Y29uc3Qgc3Bpbm5lciA9IHRoaXMubG9hZGluZ0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdsb2FkaW5nLXNwaW5uZXInIH0pO1xuXHRcdHRoaXMubG9hZGluZ0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdsb2FkaW5nLXRleHQnLCB0ZXh0OiAnRmV0Y2hpbmcgYmxvZyBpbmZvcm1hdGlvbi4uLicgfSk7XG5cblx0XHQvLyDjg5zjgr/jg7PjgrPjg7Pjg4bjg4pcblx0XHR0aGlzLmJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHR0aGlzLmJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdHRoaXMuYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtZW5kJztcblx0XHR0aGlzLmJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuXG5cdFx0Ly8g44Kt44Oj44Oz44K744Or44Oc44K/44OzXG5cdFx0Y29uc3QgY2FuY2VsQnV0dG9uID0gdGhpcy5idXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG5cdFx0Y2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuXHRcdC8vIOS9nOaIkOODnOOCv+ODs1xuXHRcdGNvbnN0IGNyZWF0ZUJ1dHRvbiA9IHRoaXMuYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDcmVhdGUnLCBjbHM6ICdtb2QtY3RhJyB9KTtcblx0XHRjcmVhdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG5cdFx0XHR0aGlzLnN0YXJ0UHJvY2Vzc2luZygpO1xuXHRcdH0pO1xuXG5cdFx0Ly8g5YWl5Yqb44OV44Kj44O844Or44OJ44Gr44OV44Kp44O844Kr44K5XG5cdFx0dGhpcy51cmxJbnB1dC5mb2N1cygpO1xuXHR9XG5cdFxuXHQvLyDjg6Ljg4fjg6vlkI3jga7ooajnpLrnlKjmloflrZfliJfjgpLlj5blvpdcblx0cHJpdmF0ZSBnZXRNb2RlbERpc3BsYXlOYW1lKG1vZGVsSWQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Y29uc3QgbW9kZWxNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG5cdFx0XHQnY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDcnOiAnQ2xhdWRlIDMgSGFpa3UgKEZhc3QpJyxcblx0XHRcdCdjbGF1ZGUtMy1zb25uZXQtMjAyNDAyMjknOiAnQ2xhdWRlIDMgU29ubmV0IChCYWxhbmNlZCknLFxuXHRcdFx0J2NsYXVkZS0zLW9wdXMtMjAyNDAyMjknOiAnQ2xhdWRlIDMgT3B1cyAoUG93ZXJmdWwpJ1xuXHRcdH07XG5cdFx0XG5cdFx0cmV0dXJuIG1vZGVsTWFwW21vZGVsSWRdIHx8ICdVbmtub3duJztcblx0fVxuXG5cdC8vIFVSTOOBi+OCieOCq+ODvOODieS9nOaIkOWHpueQhuOCkumWi+Wni1xuXHRhc3luYyBzdGFydFByb2Nlc3NpbmcoKSB7XG5cdFx0aWYgKCF0aGlzLnVybCkge1xuXHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgdmFsaWQgdGVjaCBibG9nIFVSTCcpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHQvLyDjg63jg7zjg4fjgqPjg7PjgrDjgqTjg7PjgrjjgrHjg7zjgr/jgpLooajnpLrjgZfjgIHjg5zjgr/jg7PjgpLpnZ7ooajnpLpcblx0XHRcdHRoaXMubG9hZGluZ0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdFx0dGhpcy5idXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdFxuXHRcdFx0Ly8gTm90aWNl6KGo56S644KC5L2155SoXG5cdFx0XHRuZXcgTm90aWNlKCdGZXRjaGluZyBibG9nIGluZm9ybWF0aW9uLi4uJyk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IGJsb2dJbmZvID0gYXdhaXQgdGhpcy5wbHVnaW4uZmV0Y2hCbG9nSW5mbyh0aGlzLnVybCk7XG5cdFx0XHRcblx0XHRcdC8vIOeUn+aIkOS4reOBruODoeODg+OCu+ODvOOCuOOBq+abtOaWsFxuXHRcdFx0Y29uc3QgbG9hZGluZ1RleHQgPSB0aGlzLmxvYWRpbmdDb250YWluZXIucXVlcnlTZWxlY3RvcignLmxvYWRpbmctdGV4dCcpIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKGxvYWRpbmdUZXh0KSB7XG5cdFx0XHRcdGxvYWRpbmdUZXh0LmlubmVyVGV4dCA9ICdDcmVhdGluZyBibG9nIGNhcmQuLi4nO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5jcmVhdGVOb3RlRnJvbVRlbXBsYXRlKGJsb2dJbmZvKTtcblx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Ly8g44Ko44Op44O85pmC44Gv44Ot44O844OH44Kj44Oz44Kw44KS6Z2e6KGo56S644Gr44GX44Gm44Oc44K/44Oz44KS5YaN6KGo56S6XG5cdFx0XHR0aGlzLmxvYWRpbmdDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdHRoaXMuYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XG5cdFx0fVxuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4vKipcbiAqIOODleOCqeODq+ODgOmBuOaKnueUqOOBruODouODvOODgOODq1xuICovXG5jbGFzcyBGb2xkZXJTZWxlY3Rvck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRvblNlbGVjdDogKGZvbGRlcjogVEZvbGRlcikgPT4gdm9pZDtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25TZWxlY3Q6IChmb2xkZXI6IFRGb2xkZXIpID0+IHZvaWQpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMub25TZWxlY3QgPSBvblNlbGVjdDtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnU2VsZWN0IE91dHB1dCBGb2xkZXInIH0pO1xuXG5cdFx0Y29uc3QgZm9sZGVyTGlzdCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHRmb2xkZXJMaXN0LnN0eWxlLm1heEhlaWdodCA9ICc0MDBweCc7XG5cdFx0Zm9sZGVyTGlzdC5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcblxuXHRcdC8vIOODleOCqeODq+ODgOOBruS4gOimp+OCkuWPluW+l+OBl+OBpuihqOekulxuXHRcdGNvbnN0IGZvbGRlcnM6IFRGb2xkZXJbXSA9IFtdO1xuXHRcdHRoaXMuZ2V0QWxsRm9sZGVycyh0aGlzLmFwcC52YXVsdC5nZXRSb290KCksIGZvbGRlcnMpO1xuXG5cdFx0Zm9sZGVycy5mb3JFYWNoKGZvbGRlciA9PiB7XG5cdFx0XHRjb25zdCBmb2xkZXJJdGVtID0gZm9sZGVyTGlzdC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb2xkZXItaXRlbScgfSk7XG5cdFx0XHRmb2xkZXJJdGVtLnN0eWxlLnBhZGRpbmcgPSAnNXB4Jztcblx0XHRcdGZvbGRlckl0ZW0uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuXHRcdFx0Zm9sZGVySXRlbS5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG5cdFx0XHRmb2xkZXJJdGVtLmlubmVySFRNTCA9IGA8c3Bhbj4ke2ZvbGRlci5wYXRoIHx8ICcvJ308L3NwYW4+YDtcblx0XHRcdFxuXHRcdFx0Zm9sZGVySXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0dGhpcy5vblNlbGVjdChmb2xkZXIpO1xuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Zm9sZGVySXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuXHRcdFx0XHRmb2xkZXJJdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKSc7XG5cdFx0XHR9KTtcblxuXHRcdFx0Zm9sZGVySXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuXHRcdFx0XHRmb2xkZXJJdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHQvLyDjg5Xjgqnjg6vjg4DjgpLlho3luLDnmoTjgavlj5blvpdcblx0Z2V0QWxsRm9sZGVycyhmb2xkZXI6IFRGb2xkZXIsIGZvbGRlcnM6IFRGb2xkZXJbXSkge1xuXHRcdGZvbGRlcnMucHVzaChmb2xkZXIpO1xuXHRcdFxuXHRcdGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XG5cdFx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG5cdFx0XHRcdHRoaXMuZ2V0QWxsRm9sZGVycyhjaGlsZCwgZm9sZGVycyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufSJdLCJuYW1lcyI6WyJQbHVnaW4iLCJOb3RpY2UiLCJURmlsZSIsIlRGb2xkZXIiLCJNb2RhbCIsIlBsdWdpblNldHRpbmdUYWIiLCJTZXR0aW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWtHQTtBQUNPLFNBQVMsU0FBUyxDQUFDLE9BQU8sRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRTtBQUM3RCxJQUFJLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLE9BQU8sS0FBSyxZQUFZLENBQUMsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsVUFBVSxPQUFPLEVBQUUsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtBQUNoSCxJQUFJLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQyxFQUFFLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUMvRCxRQUFRLFNBQVMsU0FBUyxDQUFDLEtBQUssRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7QUFDbkcsUUFB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
